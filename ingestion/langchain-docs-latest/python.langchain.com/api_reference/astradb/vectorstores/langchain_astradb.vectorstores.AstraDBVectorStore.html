
<!DOCTYPE html>

<html data-content_root="../../" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/><meta content="width=device-width, initial-scale=1" name="viewport"/>
<!-- Google tag (gtag.js) -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-9B66JQQH2F"></script>
<script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-9B66JQQH2F');
    </script>
<title>AstraDBVectorStore — 🦜🔗 LangChain  documentation</title>
<script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
<!--
    this give us a css class that will be invisible only if js is disabled
  -->
<noscript>
<style>
      .pst-js-only { display: none !important; }

    </style>
</noscript>
<!-- Loaded before other Sphinx assets -->
<link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet"/>
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet"/>
<link href="../../_static/pygments.css?v=8f2a1f02" rel="stylesheet" type="text/css"/>
<link href="../../_static/autodoc_pydantic.css" rel="stylesheet" type="text/css"/>
<link href="../../_static/copybutton.css?v=76b2166b" rel="stylesheet" type="text/css"/>
<link href="../../_static/sphinx-design.min.css?v=95c83b7e" rel="stylesheet" type="text/css"/>
<link href="../../_static/css/custom.css?v=8e9fa5b3" rel="stylesheet" type="text/css"/>
<!-- So that users can add custom icons -->
<script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
<!-- Pre-loaded scripts that we'll load fully later -->
<link as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" rel="preload"/>
<link as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" rel="preload"/>
<script src="../../_static/documentation_options.js?v=3b5cce75"></script>
<script src="../../_static/doctools.js?v=9bcbadda"></script>
<script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
<script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
<script src="../../_static/copybutton.js?v=f281be69"></script>
<script src="../../_static/design-tabs.js?v=f930bc37"></script>
<script>DOCUMENTATION_OPTIONS.pagename = 'astradb/vectorstores/langchain_astradb.vectorstores.AstraDBVectorStore';</script>
<link href="../../_static/favicon.png" rel="icon"/>
<link href="../../search.html" rel="search" title="Search"/>
<link href="langchain_astradb.vectorstores.AstraDBVectorStoreError.html" rel="next" title="AstraDBVectorStoreError"/>
<link href="langchain_astradb.vectorstores.AstraDBQueryResult.html" rel="prev" title="AstraDBQueryResult"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta content="en" name="docsearch:language"/>
<meta content="" name="docsearch:version"/>
<meta content="Jul 10, 2025" name="docbuild:last-update"/>
</head>
<body data-bs-root-margin="0px 0px -60%" data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-default-mode="" data-offset="180">
<div class="skip-link d-print-none" id="pst-skip-link"><a href="#main-content">Skip to main content</a></div>
<div id="pst-scroll-pixel-helper"></div>
<button class="btn rounded-pill" id="pst-back-to-top" type="button">
<i class="fa-solid fa-arrow-up"></i>Back to top</button>
<dialog id="pst-search-dialog">
<form action="../../search.html" class="bd-search d-flex align-items-center" method="get">
<i class="fa-solid fa-magnifying-glass"></i>
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="form-control" name="q" placeholder="Search" spellcheck="false" type="search"/>
<span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
</dialog>
<div class="pst-async-banner-revealer d-none">
<aside aria-label="Version warning" class="d-none d-print-none" id="bd-header-version-warning"></aside>
</div>
<header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
<button aria-label="Site navigation" class="pst-navbar-icon sidebar-toggle primary-toggle">
<span class="fa-solid fa-bars"></span>
</button>
<div class="navbar-header-items__start">
<div class="navbar-item">
<a class="navbar-brand logo" href="../../index.html">
<img alt="🦜🔗 LangChain  documentation - Home" class="logo__image only-light" src="../../_static/wordmark-api.svg"/>
<img alt="🦜🔗 LangChain  documentation - Home" class="logo__image only-dark pst-js-only" src="../../_static/wordmark-api-dark.svg"/>
</a></div>
</div>
<div class="navbar-header-items">
<div class="me-auto navbar-header-items__center">
<div class="navbar-item">
<nav>
<ul class="bd-navbar-elements navbar-nav">
<li class="nav-item current active">
<a class="nav-link nav-internal" href="../../reference.html">
    Reference
  </a>
</li>
</ul>
</nav></div>
</div>
<div class="navbar-header-items__end">
<div class="navbar-item navbar-persistent--container">
<form action="../../search.html" class="bd-search d-flex align-items-center" method="get">
<i class="fa-solid fa-magnifying-glass"></i>
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="form-control" name="q" placeholder="Search" spellcheck="false" type="search"/>
<span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
</div>
<div class="navbar-item"><!-- This will display a link to LangChain docs -->
<head>
<style>
        .text-link {
            text-decoration: none; /* Remove underline */
            color: inherit;        /* Inherit color from parent element */
        }
    </style>
</head>
<body>
<a class="text-link" href="https://python.langchain.com/">Docs</a>
</body></div>
<div class="navbar-item">
<button aria-label="Color mode" class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" data-bs-placement="bottom" data-bs-title="Color mode" data-bs-toggle="tooltip">
<i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light" title="Light"></i>
<i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark" title="Dark"></i>
<i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto" title="System Settings"></i>
</button></div>
<div class="navbar-item"><ul aria-label="Quick Links" class="navbar-icon-links">
<li class="nav-item">
<a class="nav-link pst-navbar-icon" data-bs-placement="bottom" data-bs-toggle="tooltip" href="https://github.com/langchain-ai/langchain" rel="noopener" target="_blank" title="GitHub"><i aria-hidden="true" class="fa-brands fa-square-github fa-lg"></i>
<span class="sr-only">GitHub</span></a>
</li>
<li class="nav-item">
<a class="nav-link pst-navbar-icon" data-bs-placement="bottom" data-bs-toggle="tooltip" href="https://twitter.com/langchainai" rel="noopener" target="_blank" title="X / Twitter"><i aria-hidden="true" class="fab fa-twitter-square fa-lg"></i>
<span class="sr-only">X / Twitter</span></a>
</li>
</ul></div>
</div>
</div>
<div class="navbar-persistent--mobile">
<form action="../../search.html" class="bd-search d-flex align-items-center" method="get">
<i class="fa-solid fa-magnifying-glass"></i>
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="form-control" name="q" placeholder="Search" spellcheck="false" type="search"/>
<span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
</div>
<button aria-label="On this page" class="pst-navbar-icon sidebar-toggle secondary-toggle">
<span class="fa-solid fa-outdent"></span>
</button>
</div>
</header>
<div class="bd-container">
<div class="bd-container__inner bd-page-width">
<dialog id="pst-primary-sidebar-modal"></dialog>
<div class="bd-sidebar-primary bd-sidebar" id="pst-primary-sidebar">
<div class="sidebar-header-items sidebar-primary__section">
<div class="sidebar-header-items__center">
<div class="navbar-item">
<nav>
<ul class="bd-navbar-elements navbar-nav">
<li class="nav-item current active">
<a class="nav-link nav-internal" href="../../reference.html">
    Reference
  </a>
</li>
</ul>
</nav></div>
</div>
<div class="sidebar-header-items__end">
<div class="navbar-item"><!-- This will display a link to LangChain docs -->
<head>
<style>
        .text-link {
            text-decoration: none; /* Remove underline */
            color: inherit;        /* Inherit color from parent element */
        }
    </style>
</head>
<body>
<a class="text-link" href="https://python.langchain.com/">Docs</a>
</body></div>
<div class="navbar-item">
<button aria-label="Color mode" class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" data-bs-placement="bottom" data-bs-title="Color mode" data-bs-toggle="tooltip">
<i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light" title="Light"></i>
<i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark" title="Dark"></i>
<i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto" title="System Settings"></i>
</button></div>
<div class="navbar-item"><ul aria-label="Quick Links" class="navbar-icon-links">
<li class="nav-item">
<a class="nav-link pst-navbar-icon" data-bs-placement="bottom" data-bs-toggle="tooltip" href="https://github.com/langchain-ai/langchain" rel="noopener" target="_blank" title="GitHub"><i aria-hidden="true" class="fa-brands fa-square-github fa-lg"></i>
<span class="sr-only">GitHub</span></a>
</li>
<li class="nav-item">
<a class="nav-link pst-navbar-icon" data-bs-placement="bottom" data-bs-toggle="tooltip" href="https://twitter.com/langchainai" rel="noopener" target="_blank" title="X / Twitter"><i aria-hidden="true" class="fab fa-twitter-square fa-lg"></i>
<span class="sr-only">X / Twitter</span></a>
</li>
</ul></div>
</div>
</div>
<div class="sidebar-primary-items__start sidebar-primary__section">
<div class="sidebar-primary-item">
<nav aria-label="Section Navigation" class="bd-docs-nav bd-links">
<p aria-level="1" class="bd-links__title" role="heading">Section Navigation</p>
<div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">Base packages</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../core/index.html">Core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../langchain/index.html">Langchain</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../text_splitters/index.html">Text Splitters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../experimental/index.html">Experimental</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Integrations</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../ai21/index.html">AI21</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../anthropic/index.html">Anthropic</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../index.html">AstraDB</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../cache.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">cache</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../chat_message_histories.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">chat_message_histories</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../document_loaders.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">document_loaders</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../storage.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">storage</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../utils.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">utils</span></code></a></li>
<li class="toctree-l2 current active has-children"><a class="reference internal" href="../vectorstores.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">vectorstores</span></code></a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="langchain_astradb.vectorstores.AstraDBQueryResult.html">AstraDBQueryResult</a></li>
<li class="toctree-l3 current active"><a class="current reference internal" href="#">AstraDBVectorStore</a></li>
<li class="toctree-l3"><a class="reference internal" href="langchain_astradb.vectorstores.AstraDBVectorStoreError.html">AstraDBVectorStoreError</a></li>
<li class="toctree-l3"><a class="reference internal" href="langchain_astradb.vectorstores.HybridLimitFactorPrescription.html">HybridLimitFactorPrescription</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../../aws/index.html">AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../azure_ai/index.html">Azure Ai</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../azure_dynamic_sessions/index.html">Azure Dynamic Sessions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cerebras/index.html">Cerebras</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../chroma/index.html">Chroma</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cohere/index.html">Cohere</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../db2/index.html">Db2</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deepseek/index.html">Deepseek</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../elasticsearch/index.html">Elasticsearch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../exa/index.html">Exa</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fireworks/index.html">Fireworks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../google_community/index.html">Google Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../google_genai/index.html">Google GenAI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../google_vertexai/index.html">Google VertexAI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../groq/index.html">Groq</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../huggingface/index.html">Huggingface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ibm/index.html">IBM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../milvus/index.html">Milvus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mistralai/index.html">MistralAI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mongodb/index.html">MongoDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../neo4j/index.html">Neo4J</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nomic/index.html">Nomic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../nvidia_ai_endpoints/index.html">Nvidia Ai Endpoints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ollama/index.html">Ollama</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../openai/index.html">OpenAI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../perplexity/index.html">Perplexity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pinecone/index.html">Pinecone</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../postgres/index.html">Postgres</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../prompty/index.html">Prompty</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../qdrant/index.html">Qdrant</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../redis/index.html">Redis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sema4/index.html">Sema4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../snowflake/index.html">Snowflake</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sqlserver/index.html">Sqlserver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../standard_tests/index.html">Standard Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tavily/index.html">Tavily</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../together/index.html">Together</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../unstructured/index.html">Unstructured</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../upstage/index.html">Upstage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../weaviate/index.html">Weaviate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../xai/index.html">XAI</a></li>
</ul>
</div>
</nav></div>
</div>
<div class="sidebar-primary-items__end sidebar-primary__section">
<div class="sidebar-primary-item">
<div class="flat" data-ea-manual="true" data-ea-publisher="readthedocs" data-ea-type="readthedocs-sidebar" id="ethical-ad-placement">
</div></div>
</div>
</div>
<main class="bd-main" id="main-content" role="main">
<div class="bd-content">
<div class="bd-article-container">
<div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
<div class="header-article-items__start">
<div class="header-article-item">
<nav aria-label="Breadcrumb" class="d-print-none">
<ul class="bd-breadcrumbs">
<li class="breadcrumb-item breadcrumb-home">
<a aria-label="Home" class="nav-link" href="../../index.html">
<i class="fa-solid fa-home"></i>
</a>
</li>
<li class="breadcrumb-item"><a class="nav-link" href="../../reference.html">LangChain Python API Reference</a></li>
<li class="breadcrumb-item"><a class="nav-link" href="../index.html">langchain-astradb: 0.6.1</a></li>
<li class="breadcrumb-item"><a class="nav-link" href="../vectorstores.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">vectorstores</span></code></a></li>
<li aria-current="page" class="breadcrumb-item active"><span class="ellipsis">AstraDBVectorStore</span></li>
</ul>
</nav>
</div>
</div>
</div>
</div>
<div id="searchbox"></div>
<article class="bd-article">
<section id="astradbvectorstore">
<h1>AstraDBVectorStore<a class="headerlink" href="#astradbvectorstore" title="Link to this heading">#</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">langchain_astradb.vectorstores.</span></span><span class="sig-name descname"><span class="pre">AstraDBVectorStore</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">embedding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings" title="langchain_core.embeddings.embeddings.Embeddings"><span class="pre">Embeddings</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">TokenProvider</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">api_endpoint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">environment</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">namespace</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">bulk_insert_batch_concurrency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">bulk_insert_overwrite_concurrency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">bulk_delete_concurrency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">setup_mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../utils/langchain_astradb.utils.astradb.SetupMode.html#langchain_astradb.utils.astradb.SetupMode" title="langchain_astradb.utils.astradb.SetupMode"><span class="pre">SetupMode</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">pre_delete_collection</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">metadata_indexing_include</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">metadata_indexing_exclude</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">collection_indexing_policy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">collection_vector_service_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">VectorServiceOptions</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">collection_embedding_api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">EmbeddingHeadersProvider</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">content_field</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">ignore_invalid_documents</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">autodetect_collection</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">ext_callers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">component_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'langchain_vectorstore'</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">api_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">APIOptions</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">collection_rerank</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CollectionRerankOptions</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">RerankServiceOptions</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">collection_reranking_api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">RerankingHeadersProvider</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">collection_lexical</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">CollectionLexicalOptions</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">hybrid_search</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../utils/langchain_astradb.utils.astradb.HybridSearchMode.html#langchain_astradb.utils.astradb.HybridSearchMode" title="langchain_astradb.utils.astradb.HybridSearchMode"><span class="pre">HybridSearchMode</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">hybrid_limit_factor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="langchain_astradb.vectorstores.HybridLimitFactorPrescription.html#langchain_astradb.vectorstores.HybridLimitFactorPrescription" title="langchain_astradb.vectorstores.HybridLimitFactorPrescription"><span class="pre">HybridLimitFactorPrescription</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore" title="Link to this definition">#</a></dt>
<dd><p>A vector store which uses DataStax Astra DB as backend.</p>
<dl>
<dt>Setup:</dt><dd><p>Install the <code class="docutils literal notranslate"><span class="pre">langchain-astradb</span></code> package and head to the
<a class="reference external" href="https://astra.datastax.com">AstraDB website</a>, create an account, create a
new database and <a class="reference external" href="https://docs.datastax.com/en/astra-db-serverless/administration/manage-application-tokens.html">create an application token</a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-qU<span class="w"> </span>langchain-astradb
</pre></div>
</div>
</dd>
<dt>Key init args — indexing params:</dt><dd><dl class="simple">
<dt>collection_name: str</dt><dd><p>Name of the collection.</p>
</dd>
<dt>embedding: Embeddings</dt><dd><p>Embedding function to use.</p>
</dd>
</dl>
</dd>
<dt>Key init args — client params:</dt><dd><dl class="simple">
<dt>api_endpoint: str</dt><dd><p>Astra DB API endpoint.</p>
</dd>
<dt>token: str</dt><dd><p>API token for Astra DB usage.</p>
</dd>
<dt>namespace: Optional[str]</dt><dd><p>Namespace (aka keyspace) where the collection is created</p>
</dd>
</dl>
</dd>
<dt>Instantiate:</dt><dd><p>Get your API endpoint and application token from the dashboard of your database.</p>
<p>Create a vector store and provide a LangChain embedding object for working with it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">getpass</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">langchain_astradb</span><span class="w"> </span><span class="kn">import</span> <span class="n">AstraDBVectorStore</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">langchain_openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAIEmbeddings</span>

<span class="n">ASTRA_DB_API_ENDPOINT</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s2">"ASTRA_DB_API_ENDPOINT = "</span><span class="p">)</span>
<span class="n">ASTRA_DB_APPLICATION_TOKEN</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s2">"ASTRA_DB_APPLICATION_TOKEN = "</span><span class="p">)</span>

<span class="n">vector_store</span> <span class="o">=</span> <span class="n">AstraDBVectorStore</span><span class="p">(</span>
    <span class="n">collection_name</span><span class="o">=</span><span class="s2">"astra_vector_langchain"</span><span class="p">,</span>
    <span class="n">embedding</span><span class="o">=</span><span class="n">OpenAIEmbeddings</span><span class="p">(),</span>
    <span class="n">api_endpoint</span><span class="o">=</span><span class="n">ASTRA_DB_API_ENDPOINT</span><span class="p">,</span>
    <span class="n">token</span><span class="o">=</span><span class="n">ASTRA_DB_APPLICATION_TOKEN</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>(Vectorize) Create a vector store where the embedding vector computation happens entirely
on the server-side, using the <a class="reference external" href="https://docs.datastax.com/en/astra-db-serverless/databases/embedding-generation.html">vectorize</a> feature:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">getpass</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">astrapy.info</span><span class="w"> </span><span class="kn">import</span> <span class="n">VectorServiceOptions</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">langchain_astradb</span><span class="w"> </span><span class="kn">import</span> <span class="n">AstraDBVectorStore</span>

<span class="n">ASTRA_DB_API_ENDPOINT</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s2">"ASTRA_DB_API_ENDPOINT = "</span><span class="p">)</span>
<span class="n">ASTRA_DB_APPLICATION_TOKEN</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s2">"ASTRA_DB_APPLICATION_TOKEN = "</span><span class="p">)</span>

<span class="n">vector_store</span> <span class="o">=</span> <span class="n">AstraDBVectorStore</span><span class="p">(</span>
    <span class="n">collection_name</span><span class="o">=</span><span class="s2">"astra_vectorize_langchain"</span><span class="p">,</span>
    <span class="n">api_endpoint</span><span class="o">=</span><span class="n">ASTRA_DB_API_ENDPOINT</span><span class="p">,</span>
    <span class="n">token</span><span class="o">=</span><span class="n">ASTRA_DB_APPLICATION_TOKEN</span><span class="p">,</span>
    <span class="n">collection_vector_service_options</span><span class="o">=</span><span class="n">VectorServiceOptions</span><span class="p">(</span>
        <span class="n">provider</span><span class="o">=</span><span class="s2">"nvidia"</span><span class="p">,</span>
        <span class="n">model_name</span><span class="o">=</span><span class="s2">"NV-Embed-QA"</span><span class="p">,</span>
        <span class="c1"># authentication=...,  # needed by some providers/models</span>
    <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>(Hybrid) The underlying Astra DB typically supports hybrid search
(i.e. lexical + vector ANN) to boost the results’ accuracy.
This is provisioned and used automatically when available. For manual control,
use the <code class="docutils literal notranslate"><span class="pre">collection_rerank</span></code> and <code class="docutils literal notranslate"><span class="pre">collection_lexical</span></code> constructor parameters:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">getpass</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">astrapy.info</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">CollectionLexicalOptions</span><span class="p">,</span>
    <span class="n">CollectionRerankOptions</span><span class="p">,</span>
    <span class="n">RerankServiceOptions</span><span class="p">,</span>
    <span class="n">VectorServiceOptions</span><span class="p">,</span>
<span class="p">)</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">langchain_astradb</span><span class="w"> </span><span class="kn">import</span> <span class="n">AstraDBVectorStore</span>

<span class="n">ASTRA_DB_API_ENDPOINT</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s2">"ASTRA_DB_API_ENDPOINT = "</span><span class="p">)</span>
<span class="n">ASTRA_DB_APPLICATION_TOKEN</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s2">"ASTRA_DB_APPLICATION_TOKEN = "</span><span class="p">)</span>

<span class="n">vector_store</span> <span class="o">=</span> <span class="n">AstraDBVectorStore</span><span class="p">(</span>
    <span class="n">collection_name</span><span class="o">=</span><span class="s2">"astra_vectorize_langchain"</span><span class="p">,</span>
    <span class="c1"># embedding=...,  # needed unless using 'vectorize'</span>
    <span class="n">api_endpoint</span><span class="o">=</span><span class="n">ASTRA_DB_API_ENDPOINT</span><span class="p">,</span>
    <span class="n">token</span><span class="o">=</span><span class="n">ASTRA_DB_APPLICATION_TOKEN</span><span class="p">,</span>
    <span class="n">collection_vector_service_options</span><span class="o">=</span><span class="n">VectorServiceOptions</span><span class="p">(</span><span class="o">...</span><span class="p">),</span>  <span class="c1"># see above</span>
    <span class="n">collection_lexical</span><span class="o">=</span><span class="n">CollectionLexicalOptions</span><span class="p">(</span><span class="n">analyzer</span><span class="o">=</span><span class="s2">"standard"</span><span class="p">),</span>
    <span class="n">collection_rerank</span><span class="o">=</span><span class="n">CollectionRerankOptions</span><span class="p">(</span>
        <span class="n">service</span><span class="o">=</span><span class="n">RerankServiceOptions</span><span class="p">(</span>
            <span class="n">provider</span><span class="o">=</span><span class="s2">"nvidia"</span><span class="p">,</span>
            <span class="n">model_name</span><span class="o">=</span><span class="s2">"nvidia/llama-3.2-nv-rerankqa-1b-v2"</span><span class="p">,</span>
        <span class="p">),</span>
    <span class="p">),</span>
    <span class="n">collection_reranking_api_key</span><span class="o">=...</span><span class="p">,</span>  <span class="c1"># if needed by the model/setup</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Hybrid-related server upgrades may introduce a mismatch between the store
defaults and a pre-existing collection: in case one such mismatch is
reported (as a Data API “EXISTING_COLLECTION_DIFFERENT_SETTINGS” error),
the options to resolve are:
(1) use autodetect mode, (2) switch to <code class="docutils literal notranslate"><span class="pre">setup_mode</span></code> “OFF”, or
(3) explicitly specify lexical and/or rerank settings in the vector
store constructor, to match the existing collection configuration.
See <a class="reference external" href="https://github.com/langchain-ai/langchain-datastax/blob/main/libs/astradb/README.md#collection-defaults-mismatch">here</a> for more details.</p>
<p>(Autodetect) Let the vector store figure out the configuration (including vectorize
and document encoding scheme on DB), by inspection of an existing collection:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">getpass</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">langchain_astradb</span><span class="w"> </span><span class="kn">import</span> <span class="n">AstraDBVectorStore</span>

<span class="n">ASTRA_DB_API_ENDPOINT</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s2">"ASTRA_DB_API_ENDPOINT = "</span><span class="p">)</span>
<span class="n">ASTRA_DB_APPLICATION_TOKEN</span> <span class="o">=</span> <span class="n">getpass</span><span class="o">.</span><span class="n">getpass</span><span class="p">(</span><span class="s2">"ASTRA_DB_APPLICATION_TOKEN = "</span><span class="p">)</span>

<span class="n">vector_store</span> <span class="o">=</span> <span class="n">AstraDBVectorStore</span><span class="p">(</span>
    <span class="n">collection_name</span><span class="o">=</span><span class="s2">"astra_existing_collection"</span><span class="p">,</span>
    <span class="c1"># embedding=...,  # needed unless using 'vectorize'</span>
    <span class="n">api_endpoint</span><span class="o">=</span><span class="n">ASTRA_DB_API_ENDPOINT</span><span class="p">,</span>
    <span class="n">token</span><span class="o">=</span><span class="n">ASTRA_DB_APPLICATION_TOKEN</span><span class="p">,</span>
    <span class="n">autodetect_collection</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>(Non-Astra DB) This class can also target a non-Astra DB database, such as a
self-deployed HCD, through the Data API:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">getpass</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">astrapy.authentication</span><span class="w"> </span><span class="kn">import</span> <span class="n">UsernamePasswordTokenProvider</span>

<span class="kn">from</span><span class="w"> </span><span class="nn">langchain_astradb</span><span class="w"> </span><span class="kn">import</span> <span class="n">AstraDBVectorStore</span>

<span class="n">vector_store</span> <span class="o">=</span> <span class="n">AstraDBVectorStore</span><span class="p">(</span>
    <span class="n">collection_name</span><span class="o">=</span><span class="s2">"astra_existing_collection"</span><span class="p">,</span>
    <span class="c1"># embedding=...,  # needed unless using 'vectorize'</span>
    <span class="n">api_endpoint</span><span class="o">=</span><span class="s2">"http://localhost:8181"</span><span class="p">,</span>
    <span class="n">token</span><span class="o">=</span><span class="n">UsernamePasswordTokenProvider</span><span class="p">(</span>
        <span class="n">username</span><span class="o">=</span><span class="s2">"user"</span><span class="p">,</span>
        <span class="n">password</span><span class="o">=</span><span class="s2">"pwd"</span><span class="p">,</span>
    <span class="p">),</span>
    <span class="n">collection_vector_service_options</span><span class="o">=...</span><span class="p">,</span>  <span class="c1"># if 'vectorize'</span>
<span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>Add Documents:</dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">langchain_core.documents</span><span class="w"> </span><span class="kn">import</span> <span class="n">Document</span>

<span class="n">document_1</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">page_content</span><span class="o">=</span><span class="s2">"foo"</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="p">{</span><span class="s2">"baz"</span><span class="p">:</span> <span class="s2">"bar"</span><span class="p">})</span>
<span class="n">document_2</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">page_content</span><span class="o">=</span><span class="s2">"thud"</span><span class="p">,</span> <span class="n">metadata</span><span class="o">=</span><span class="p">{</span><span class="s2">"bar"</span><span class="p">:</span> <span class="s2">"baz"</span><span class="p">})</span>
<span class="n">document_3</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">page_content</span><span class="o">=</span><span class="s2">"i will be deleted :("</span><span class="p">)</span>

<span class="n">documents</span> <span class="o">=</span> <span class="p">[</span><span class="n">document_1</span><span class="p">,</span> <span class="n">document_2</span><span class="p">,</span> <span class="n">document_3</span><span class="p">]</span>
<span class="n">ids</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"1"</span><span class="p">,</span> <span class="s2">"2"</span><span class="p">,</span> <span class="s2">"3"</span><span class="p">]</span>
<span class="n">vector_store</span><span class="o">.</span><span class="n">add_documents</span><span class="p">(</span><span class="n">documents</span><span class="o">=</span><span class="n">documents</span><span class="p">,</span> <span class="n">ids</span><span class="o">=</span><span class="n">ids</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>Delete Documents:</dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">vector_store</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">ids</span><span class="o">=</span><span class="p">[</span><span class="s2">"3"</span><span class="p">])</span>
</pre></div>
</div>
</dd>
<dt>Search:</dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">vector_store</span><span class="o">.</span><span class="n">similarity_search</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="s2">"thud"</span><span class="p">,</span><span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"* </span><span class="si">{</span><span class="n">doc</span><span class="o">.</span><span class="n">page_content</span><span class="si">}</span><span class="s2"> [</span><span class="si">{</span><span class="n">doc</span><span class="o">.</span><span class="n">metadata</span><span class="si">}</span><span class="s2">]"</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>thud [{'bar': 'baz'}]
</pre></div>
</div>
</dd>
<dt>Search with filter:</dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">vector_store</span><span class="o">.</span><span class="n">similarity_search</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="s2">"thud"</span><span class="p">,</span><span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="nb">filter</span><span class="o">=</span><span class="p">{</span><span class="s2">"bar"</span><span class="p">:</span> <span class="s2">"baz"</span><span class="p">})</span>
<span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"* </span><span class="si">{</span><span class="n">doc</span><span class="o">.</span><span class="n">page_content</span><span class="si">}</span><span class="s2"> [</span><span class="si">{</span><span class="n">doc</span><span class="o">.</span><span class="n">metadata</span><span class="si">}</span><span class="s2">]"</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>thud [{'bar': 'baz'}]
</pre></div>
</div>
</dd>
<dt>Search with score:</dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">vector_store</span><span class="o">.</span><span class="n">similarity_search_with_score</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="s2">"qux"</span><span class="p">,</span><span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">for</span> <span class="n">doc</span><span class="p">,</span> <span class="n">score</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"* [SIM=</span><span class="si">{</span><span class="n">score</span><span class="si">:</span><span class="s2">3f</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="n">doc</span><span class="o">.</span><span class="n">page_content</span><span class="si">}</span><span class="s2"> [</span><span class="si">{</span><span class="n">doc</span><span class="o">.</span><span class="n">metadata</span><span class="si">}</span><span class="s2">]"</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[SIM=0.916135] foo [{'baz': 'bar'}]
</pre></div>
</div>
</dd>
<dt>Async:</dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># add documents</span>
<span class="k">await</span> <span class="n">vector_store</span><span class="o">.</span><span class="n">aadd_documents</span><span class="p">(</span><span class="n">documents</span><span class="o">=</span><span class="n">documents</span><span class="p">,</span> <span class="n">ids</span><span class="o">=</span><span class="n">ids</span><span class="p">)</span>

<span class="c1"># delete documents</span>
<span class="k">await</span> <span class="n">vector_store</span><span class="o">.</span><span class="n">adelete</span><span class="p">(</span><span class="n">ids</span><span class="o">=</span><span class="p">[</span><span class="s2">"3"</span><span class="p">])</span>

<span class="c1"># search</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">vector_store</span><span class="o">.</span><span class="n">asimilarity_search</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="s2">"thud"</span><span class="p">,</span><span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># search with score</span>
<span class="n">results</span> <span class="o">=</span> <span class="k">await</span> <span class="n">vector_store</span><span class="o">.</span><span class="n">asimilarity_search_with_score</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="s2">"qux"</span><span class="p">,</span><span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">for</span> <span class="n">doc</span><span class="p">,</span><span class="n">score</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"* [SIM=</span><span class="si">{</span><span class="n">score</span><span class="si">:</span><span class="s2">3f</span><span class="si">}</span><span class="s2">] </span><span class="si">{</span><span class="n">doc</span><span class="o">.</span><span class="n">page_content</span><span class="si">}</span><span class="s2"> [</span><span class="si">{</span><span class="n">doc</span><span class="o">.</span><span class="n">metadata</span><span class="si">}</span><span class="s2">]"</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[SIM=0.916135] foo [{'baz': 'bar'}]
</pre></div>
</div>
</dd>
<dt>Use as Retriever:</dt><dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">retriever</span> <span class="o">=</span> <span class="n">vector_store</span><span class="o">.</span><span class="n">as_retriever</span><span class="p">(</span>
    <span class="n">search_type</span><span class="o">=</span><span class="s2">"similarity_score_threshold"</span><span class="p">,</span>
    <span class="n">search_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s2">"k"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">"score_threshold"</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">},</span>
<span class="p">)</span>
<span class="n">retriever</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="s2">"thud"</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[Document(metadata={'bar': 'baz'}, page_content='thud')]
</pre></div>
</div>
</dd>
</dl>
<p>A vector store which uses DataStax Astra DB as backend.</p>
<p>For more on Astra DB, visit
<a class="reference external" href="https://docs.datastax.com/en/astra-db-serverless/index.html">https://docs.datastax.com/en/astra-db-serverless/index.html</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>embedding</strong> (<a class="reference internal" href="../../core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings" title="langchain_core.embeddings.embeddings.Embeddings"><em>Embeddings</em></a><em> | </em><em>None</em>) – the embeddings function or service to use.
This enables client-side embedding functions or calls to external
embedding providers. If <code class="docutils literal notranslate"><span class="pre">embedding</span></code> is passed, then
<code class="docutils literal notranslate"><span class="pre">collection_vector_service_options</span></code> can not be provided.</p></li>
<li><p><strong>collection_name</strong> (<em>str</em>) – name of the Astra DB collection to create/use.</p></li>
<li><p><strong>token</strong> (<em>str</em><em> | </em><em>TokenProvider</em><em> | </em><em>None</em>) – API token for Astra DB usage, either in the form of a string
or a subclass of <code class="docutils literal notranslate"><span class="pre">astrapy.authentication.TokenProvider</span></code>.
If not provided, the environment variable
ASTRA_DB_APPLICATION_TOKEN is inspected.</p></li>
<li><p><strong>api_endpoint</strong> (<em>str</em><em> | </em><em>None</em>) – full URL to the API endpoint, such as
<code class="docutils literal notranslate"><span class="pre">https://&lt;DB-ID&gt;-us-east1.apps.astra.datastax.com</span></code>. If not provided,
the environment variable ASTRA_DB_API_ENDPOINT is inspected.</p></li>
<li><p><strong>environment</strong> (<em>str</em><em> | </em><em>None</em>) – a string specifying the environment of the target Data API.
If omitted, defaults to “prod” (Astra DB production).
Other values are in <code class="docutils literal notranslate"><span class="pre">astrapy.constants.Environment</span></code> enum class.</p></li>
<li><p><strong>namespace</strong> (<em>str</em><em> | </em><em>None</em>) – namespace (aka keyspace) where the collection is created.
If not provided, the environment variable ASTRA_DB_KEYSPACE is
inspected. Defaults to the database’s “default namespace”.</p></li>
<li><p><strong>metric</strong> (<em>str</em><em> | </em><em>None</em>) – similarity function to use out of those available in Astra DB.
If left out, it will use Astra DB API’s defaults (i.e. “cosine” - but,
for performance reasons, “dot_product” is suggested if embeddings are
normalized to one).</p></li>
<li><p><strong>batch_size</strong> (<em>int</em><em> | </em><em>None</em>) – Size of document chunks for each individual insertion
API request. If not provided, astrapy defaults are applied.</p></li>
<li><p><strong>bulk_insert_batch_concurrency</strong> (<em>int</em><em> | </em><em>None</em>) – Number of threads or coroutines to insert
batches concurrently.</p></li>
<li><p><strong>bulk_insert_overwrite_concurrency</strong> (<em>int</em><em> | </em><em>None</em>) – Number of threads or coroutines in a
batch to insert pre-existing entries.</p></li>
<li><p><strong>bulk_delete_concurrency</strong> (<em>int</em><em> | </em><em>None</em>) – Number of threads or coroutines for
multiple-entry deletes.</p></li>
<li><p><strong>setup_mode</strong> (<a class="reference internal" href="../utils/langchain_astradb.utils.astradb.SetupMode.html#langchain_astradb.utils.astradb.SetupMode" title="langchain_astradb.utils.astradb.SetupMode"><em>SetupMode</em></a><em> | </em><em>None</em>) – mode used to create the collection (SYNC, ASYNC or OFF).</p></li>
<li><p><strong>pre_delete_collection</strong> (<em>bool</em>) – whether to delete the collection before creating it.
If False and the collection already exists, the collection will be used
as is.</p></li>
<li><p><strong>metadata_indexing_include</strong> (<em>Iterable</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>) – an allowlist of the specific metadata subfields
that should be indexed for later filtering in searches.</p></li>
<li><p><strong>metadata_indexing_exclude</strong> (<em>Iterable</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>) – a denylist of the specific metadata subfields
that should not be indexed for later filtering in searches.</p></li>
<li><p><strong>collection_indexing_policy</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – a full “indexing” specification for
what fields should be indexed for later filtering in searches.
This dict must conform to to the API specifications
(see <a class="reference external" href="https://docs.datastax.com/en/astra-db-serverless/api-reference/collections.html#the-indexing-option">https://docs.datastax.com/en/astra-db-serverless/api-reference/collections.html#the-indexing-option</a>)</p></li>
<li><p><strong>collection_vector_service_options</strong> (<em>VectorServiceOptions</em><em> | </em><em>None</em>) – specifies the use of server-side
embeddings within Astra DB. If passing this parameter, <code class="docutils literal notranslate"><span class="pre">embedding</span></code>
cannot be provided.</p></li>
<li><p><strong>collection_embedding_api_key</strong> (<em>str</em><em> | </em><em>EmbeddingHeadersProvider</em><em> | </em><em>None</em>) – for usage of server-side embeddings
within Astra DB. With this parameter one can supply an API Key
that will be passed to Astra DB with each data request.
This parameter can be either a string or a subclass of
<code class="docutils literal notranslate"><span class="pre">astrapy.authentication.EmbeddingHeadersProvider</span></code>.
This is useful when the service is configured for the collection,
but no corresponding secret is stored within
Astra’s key management system.</p></li>
<li><p><strong>content_field</strong> (<em>str</em><em> | </em><em>None</em>) – name of the field containing the textual content
in the documents when saved on Astra DB. For vectorize collections,
this cannot be specified; for non-vectorize collection, defaults
to “content”.
The special value “*” can be passed only if autodetect_collection=True.
In this case, the actual name of the key for the textual content is
guessed by inspection of a few documents from the collection, under the
assumption that the longer strings are the most likely candidates.
Please understand the limitations of this method and get some
understanding of your data before passing <code class="docutils literal notranslate"><span class="pre">"*"</span></code> for this parameter.</p></li>
<li><p><strong>ignore_invalid_documents</strong> (<em>bool</em>) – if False (default), exceptions are raised
when a document is found on the Astra DB collection that does
not have the expected shape. If set to True, such results
from the database are ignored and a warning is issued. Note
that in this case a similarity search may end up returning fewer
results than the required <code class="docutils literal notranslate"><span class="pre">k</span></code>.</p></li>
<li><p><strong>autodetect_collection</strong> (<em>bool</em>) – if True, turns on autodetect behavior.
The store will look for an existing collection of the provided name
and infer the store settings from it. Default is False.
In autodetect mode, <code class="docutils literal notranslate"><span class="pre">content_field</span></code> can be given as <code class="docutils literal notranslate"><span class="pre">"*"</span></code>, meaning
that an attempt will be made to determine it by inspection (unless
vectorize is enabled, in which case <code class="docutils literal notranslate"><span class="pre">content_field</span></code> is ignored).
In autodetect mode, the store not only determines whether embeddings
are client- or server-side, but - most importantly - switches
automatically between “nested” and “flat” representations of documents
on DB (i.e. having the metadata key-value pairs grouped in a
<code class="docutils literal notranslate"><span class="pre">metadata</span></code> field or spread at the documents’ top-level). The former
scheme is the native mode of the AstraDBVectorStore; the store resorts
to the latter in case of vector collections populated with external
means (such as a third-party data import tool) before applying
an AstraDBVectorStore to them.
Note that the following parameters cannot be used if this is True:
<code class="docutils literal notranslate"><span class="pre">metric</span></code>, <code class="docutils literal notranslate"><span class="pre">setup_mode</span></code>, <code class="docutils literal notranslate"><span class="pre">metadata_indexing_include</span></code>,
<code class="docutils literal notranslate"><span class="pre">metadata_indexing_exclude</span></code>, <code class="docutils literal notranslate"><span class="pre">collection_indexing_policy</span></code>,
<code class="docutils literal notranslate"><span class="pre">collection_vector_service_options</span></code>.</p></li>
<li><p><strong>ext_callers</strong> (<em>list</em><em>[</em><em>tuple</em><em>[</em><em>str</em><em> | </em><em>None</em><em>, </em><em>str</em><em> | </em><em>None</em><em>] </em><em>| </em><em>str</em><em> | </em><em>None</em><em>] </em><em>| </em><em>None</em>) – one or more caller identities to identify Data API calls
in the User-Agent header. This is a list of (name, version) pairs,
or just strings if no version info is provided, which, if supplied,
becomes the leading part of the User-Agent string in all API requests
related to this component.</p></li>
<li><p><strong>component_name</strong> (<em>str</em>) – the string identifying this specific component in the
stack of usage info passed as the User-Agent string to the Data API.
Defaults to “langchain_vectorstore”, but can be overridden if this
component actually serves as the building block for another component
(such as when the vector store is used within a <code class="docutils literal notranslate"><span class="pre">GraphRetriever</span></code>).</p></li>
<li><p><strong>api_options</strong> (<em>APIOptions</em><em> | </em><em>None</em>) – an instance of <code class="docutils literal notranslate"><span class="pre">astrapy.utils.api_options.APIOptions</span></code> that
can be supplied to customize the interaction with the Data API
regarding serialization/deserialization, timeouts, custom headers
and so on. The provided options are applied on top of settings already
tailored to this library, and if specified will take precedence.
Passing None (default) means no customization is requested.
Refer to the astrapy documentation for details.</p></li>
<li><p><strong>collection_rerank</strong> (<em>CollectionRerankOptions</em><em> | </em><em>RerankServiceOptions</em><em> | </em><em>None</em>) – providing reranking settings is necessary to run
hybrid searches for similarity. This parameter can be an instance
of the astrapy classes <cite>CollectionRerankOptions</cite> or
<code class="docutils literal notranslate"><span class="pre">RerankServiceOptions</span></code>.</p></li>
<li><p><strong>collection_reranking_api_key</strong> (<em>str</em><em> | </em><em>RerankingHeadersProvider</em><em> | </em><em>None</em>) – for usage of server-side reranking services
within Astra DB. With this parameter one can supply an API Key
that will be passed to Astra DB with each data request.
This parameter can be either a string or a subclass of
<code class="docutils literal notranslate"><span class="pre">astrapy.authentication.RerankingHeadersProvider</span></code>.
This is useful when the service is configured for the collection,
but no corresponding secret is stored within
Astra’s key management system.</p></li>
<li><p><strong>collection_lexical</strong> (<em>str</em><em> | </em><em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>CollectionLexicalOptions</em><em> | </em><em>None</em>) – configuring a lexical analyzer is necessary to run
lexical and hybrid searches. This parameter can be a string or dict,
which is then passed as-is for the “analyzer” field of a
createCollection’s “$lexical.analyzer” value, or a ready-made
astrapy <cite>CollectionLexicalOptions</cite> object.</p></li>
<li><p><strong>hybrid_search</strong> (<a class="reference internal" href="../utils/langchain_astradb.utils.astradb.HybridSearchMode.html#langchain_astradb.utils.astradb.HybridSearchMode" title="langchain_astradb.utils.astradb.HybridSearchMode"><em>HybridSearchMode</em></a><em> | </em><em>None</em>) – whether similarity searches should be run as Hybrid searches
or not. Values are DEFAULT, ON or OFF. In case of DEFAULT, searches
are performed as permitted by the collection configuration, with a
preference for hybrid search. Forcing this setting to ON for a
non-hybrid-enabled collection would result in a server error when
running searches.</p></li>
<li><p><strong>hybrid_limit_factor</strong> (<em>float</em><em> | </em><em>None</em><em> | </em><em>dict</em><em>[</em><em>str</em><em>, </em><em>float</em><em>] </em><em>| </em><a class="reference internal" href="langchain_astradb.vectorstores.HybridLimitFactorPrescription.html#langchain_astradb.vectorstores.HybridLimitFactorPrescription" title="langchain_astradb.vectorstores.HybridLimitFactorPrescription"><em>HybridLimitFactorPrescription</em></a>) – subsearch “limit” specification for hybrid searches.
If omitted, hybrid searches do not specify it and leave the Data API
to use its defaults.
If a floating-point positive number is provided: each subsearch
participating in the hybrid search (i.e. both the vector-based ANN
and the lexical-based) will be requested to fecth up to
<cite>int(k*hybrid_limit_factor)</cite> items, where <cite>k</cite> is the desired result
count from the whole search.
If a <cite>HybridLimitFactorPrescription</cite> is provided (see the class
docstring for details), separate factors are applied to the vector
and the lexical subsearches. Alternatively, a simple dictionary
with keys “$lexical” and “$vector” achieves the same effect.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For concurrency in synchronous <a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.add_texts" title="langchain_astradb.vectorstores.AstraDBVectorStore.add_texts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_texts()</span></code></a>:, as a rule of thumb,
on a typical client machine it is suggested to keep the quantity
bulk_insert_batch_concurrency * bulk_insert_overwrite_concurrency
much below 1000 to avoid exhausting the client multithreading/networking
resources. The hardcoded defaults are somewhat conservative to meet
most machines’ specs, but a sensible choice to test may be:</p>
<ul class="simple">
<li><p>bulk_insert_batch_concurrency = 80</p></li>
<li><p>bulk_insert_overwrite_concurrency = 10</p></li>
</ul>
<p>A bit of experimentation is required to nail the best results here,
depending on both the machine/network specs and the expected workload
(specifically, how often a write is an update of an existing id).
Remember you can pass concurrency settings to individual calls to
<a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.add_texts" title="langchain_astradb.vectorstores.AstraDBVectorStore.add_texts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_texts()</span></code></a> and <a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.add_documents" title="langchain_astradb.vectorstores.AstraDBVectorStore.add_documents"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_documents()</span></code></a> as well.</p>
</div>
<p class="rubric">Attributes</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table">
<tbody>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">embeddings</span></code></p></td>
<td><p>Accesses the supplied embeddings object.</p></td>
</tr>
</tbody>
</table>
</div>
<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.__init__" title="langchain_astradb.vectorstores.AstraDBVectorStore.__init__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code></a>(*, collection_name[, embedding, ...])</p></td>
<td><p>A vector store which uses DataStax Astra DB as backend.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.aadd_documents" title="langchain_astradb.vectorstores.AstraDBVectorStore.aadd_documents"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aadd_documents</span></code></a>(documents, **kwargs)</p></td>
<td><p>Async run more documents through the embeddings and add to the vectorstore.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.aadd_texts" title="langchain_astradb.vectorstores.AstraDBVectorStore.aadd_texts"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aadd_texts</span></code></a>(texts[, metadatas, ids, ...])</p></td>
<td><p>Run texts through the embeddings and add them to the vectorstore.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.aclear" title="langchain_astradb.vectorstores.AstraDBVectorStore.aclear"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aclear</span></code></a>()</p></td>
<td><p>Empty the collection of all its stored entries.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.add_documents" title="langchain_astradb.vectorstores.AstraDBVectorStore.add_documents"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_documents</span></code></a>(documents, **kwargs)</p></td>
<td><p>Add or update documents in the vectorstore.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.add_texts" title="langchain_astradb.vectorstores.AstraDBVectorStore.add_texts"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_texts</span></code></a>(texts[, metadatas, ids, ...])</p></td>
<td><p>Run texts through the embeddings and add them to the vectorstore.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.adelete" title="langchain_astradb.vectorstores.AstraDBVectorStore.adelete"><code class="xref py py-obj docutils literal notranslate"><span class="pre">adelete</span></code></a>([ids, concurrency])</p></td>
<td><p>Delete by vector ids.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.adelete_by_document_id" title="langchain_astradb.vectorstores.AstraDBVectorStore.adelete_by_document_id"><code class="xref py py-obj docutils literal notranslate"><span class="pre">adelete_by_document_id</span></code></a>(document_id)</p></td>
<td><p>Remove a single document from the store, given its document ID.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.adelete_by_metadata_filter" title="langchain_astradb.vectorstores.AstraDBVectorStore.adelete_by_metadata_filter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">adelete_by_metadata_filter</span></code></a>(filter)</p></td>
<td><p>Delete all documents matching a certain metadata filtering condition.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.adelete_collection" title="langchain_astradb.vectorstores.AstraDBVectorStore.adelete_collection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">adelete_collection</span></code></a>()</p></td>
<td><p>Completely delete the collection from the database.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.afrom_documents" title="langchain_astradb.vectorstores.AstraDBVectorStore.afrom_documents"><code class="xref py py-obj docutils literal notranslate"><span class="pre">afrom_documents</span></code></a>(documents[, embedding])</p></td>
<td><p>Create an Astra DB vectorstore from a document list.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.afrom_texts" title="langchain_astradb.vectorstores.AstraDBVectorStore.afrom_texts"><code class="xref py py-obj docutils literal notranslate"><span class="pre">afrom_texts</span></code></a>(texts[, embedding, metadatas, ids])</p></td>
<td><p>Create an Astra DB vectorstore from raw texts.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.aget_by_document_id" title="langchain_astradb.vectorstores.AstraDBVectorStore.aget_by_document_id"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aget_by_document_id</span></code></a>(document_id)</p></td>
<td><p>Retrieve a single document from the store, given its document ID.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.aget_by_ids" title="langchain_astradb.vectorstores.AstraDBVectorStore.aget_by_ids"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aget_by_ids</span></code></a>(ids, /)</p></td>
<td><p>Async get documents by their IDs.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.amax_marginal_relevance_search" title="langchain_astradb.vectorstores.AstraDBVectorStore.amax_marginal_relevance_search"><code class="xref py py-obj docutils literal notranslate"><span class="pre">amax_marginal_relevance_search</span></code></a>(query[, k, ...])</p></td>
<td><p>Return docs selected using the maximal marginal relevance.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.amax_marginal_relevance_search_by_vector" title="langchain_astradb.vectorstores.AstraDBVectorStore.amax_marginal_relevance_search_by_vector"><code class="xref py py-obj docutils literal notranslate"><span class="pre">amax_marginal_relevance_search_by_vector</span></code></a>(...)</p></td>
<td><p>Return docs selected using the maximal marginal relevance.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.ametadata_search" title="langchain_astradb.vectorstores.AstraDBVectorStore.ametadata_search"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ametadata_search</span></code></a>([filter, n])</p></td>
<td><p>Get documents via a metadata search.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.arun_query" title="langchain_astradb.vectorstores.AstraDBVectorStore.arun_query"><code class="xref py py-obj docutils literal notranslate"><span class="pre">arun_query</span></code></a>()</p></td>
<td><p>Execute a generic query on stored documents, returning Documents+other info.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.arun_query_raw" title="langchain_astradb.vectorstores.AstraDBVectorStore.arun_query_raw"><code class="xref py py-obj docutils literal notranslate"><span class="pre">arun_query_raw</span></code></a>()</p></td>
<td><p>Execute a generic query on stored documents, returning Astra DB documents.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.as_retriever" title="langchain_astradb.vectorstores.AstraDBVectorStore.as_retriever"><code class="xref py py-obj docutils literal notranslate"><span class="pre">as_retriever</span></code></a>(**kwargs)</p></td>
<td><p>Return VectorStoreRetriever initialized from this VectorStore.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asearch" title="langchain_astradb.vectorstores.AstraDBVectorStore.asearch"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asearch</span></code></a>(query, search_type, **kwargs)</p></td>
<td><p>Async return docs most similar to query using a specified search type.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search" title="langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asimilarity_search</span></code></a>(query[, k, filter, ...])</p></td>
<td><p>Return docs most similar to query.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_by_vector" title="langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_by_vector"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asimilarity_search_by_vector</span></code></a>(embedding[, k, ...])</p></td>
<td><p>Return docs most similar to embedding vector.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_embedding" title="langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_embedding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asimilarity_search_with_embedding</span></code></a>(query[, ...])</p></td>
<td><p>Return docs most similar to the query with embedding.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_embedding_by_vector" title="langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_embedding_by_vector"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asimilarity_search_with_embedding_by_vector</span></code></a>(...)</p></td>
<td><p>Return docs most similar to embedding vector with embedding.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_relevance_scores" title="langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_relevance_scores"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asimilarity_search_with_relevance_scores</span></code></a>(query)</p></td>
<td><p>Async return docs and relevance scores in the range [0, 1].</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_score" title="langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_score"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asimilarity_search_with_score</span></code></a>(query[, k, ...])</p></td>
<td><p>Return docs most similar to query with score.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_score_by_vector" title="langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_score_by_vector"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asimilarity_search_with_score_by_vector</span></code></a>(...)</p></td>
<td><p>Return docs most similar to embedding vector with score.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_score_id" title="langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_score_id"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asimilarity_search_with_score_id</span></code></a>(query[, k, ...])</p></td>
<td><p>Return docs most similar to the query with score and id.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_score_id_by_vector" title="langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_score_id_by_vector"><code class="xref py py-obj docutils literal notranslate"><span class="pre">asimilarity_search_with_score_id_by_vector</span></code></a>(...)</p></td>
<td><p>Return docs most similar to embedding vector with score and id.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.aupdate_metadata" title="langchain_astradb.vectorstores.AstraDBVectorStore.aupdate_metadata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">aupdate_metadata</span></code></a>(id_to_metadata, *[, ...])</p></td>
<td><p>Add/overwrite the metadata of existing documents.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.clear" title="langchain_astradb.vectorstores.AstraDBVectorStore.clear"><code class="xref py py-obj docutils literal notranslate"><span class="pre">clear</span></code></a>()</p></td>
<td><p>Empty the collection of all its stored entries.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.copy" title="langchain_astradb.vectorstores.AstraDBVectorStore.copy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">copy</span></code></a>(*[, token, ext_callers, ...])</p></td>
<td><p>Create a copy, possibly with changed attributes.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.delete" title="langchain_astradb.vectorstores.AstraDBVectorStore.delete"><code class="xref py py-obj docutils literal notranslate"><span class="pre">delete</span></code></a>([ids, concurrency])</p></td>
<td><p>Delete by vector ids.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.delete_by_document_id" title="langchain_astradb.vectorstores.AstraDBVectorStore.delete_by_document_id"><code class="xref py py-obj docutils literal notranslate"><span class="pre">delete_by_document_id</span></code></a>(document_id)</p></td>
<td><p>Remove a single document from the store, given its document ID.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.delete_by_metadata_filter" title="langchain_astradb.vectorstores.AstraDBVectorStore.delete_by_metadata_filter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">delete_by_metadata_filter</span></code></a>(filter)</p></td>
<td><p>Delete all documents matching a certain metadata filtering condition.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.delete_collection" title="langchain_astradb.vectorstores.AstraDBVectorStore.delete_collection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">delete_collection</span></code></a>()</p></td>
<td><p>Completely delete the collection from the database.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.filter_to_query" title="langchain_astradb.vectorstores.AstraDBVectorStore.filter_to_query"><code class="xref py py-obj docutils literal notranslate"><span class="pre">filter_to_query</span></code></a>(filter_dict)</p></td>
<td><p>Prepare a query for use on DB based on metadata filter.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.from_documents" title="langchain_astradb.vectorstores.AstraDBVectorStore.from_documents"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_documents</span></code></a>(documents[, embedding])</p></td>
<td><p>Create an Astra DB vectorstore from a document list.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.from_texts" title="langchain_astradb.vectorstores.AstraDBVectorStore.from_texts"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_texts</span></code></a>(texts[, embedding, metadatas, ids])</p></td>
<td><p>Create an Astra DB vectorstore from raw texts.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.full_decode_astra_db_found_document" title="langchain_astradb.vectorstores.AstraDBVectorStore.full_decode_astra_db_found_document"><code class="xref py py-obj docutils literal notranslate"><span class="pre">full_decode_astra_db_found_document</span></code></a>(...)</p></td>
<td><p>Decode an Astra DB document in full, i.e. into Document+embedding/similarity.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.full_decode_astra_db_reranked_result" title="langchain_astradb.vectorstores.AstraDBVectorStore.full_decode_astra_db_reranked_result"><code class="xref py py-obj docutils literal notranslate"><span class="pre">full_decode_astra_db_reranked_result</span></code></a>(...)</p></td>
<td><p>Full-decode an Astra DB find-and-rerank hit (Document+embedding/similarity).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.get_by_document_id" title="langchain_astradb.vectorstores.AstraDBVectorStore.get_by_document_id"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_by_document_id</span></code></a>(document_id)</p></td>
<td><p>Retrieve a single document from the store, given its document ID.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.get_by_ids" title="langchain_astradb.vectorstores.AstraDBVectorStore.get_by_ids"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_by_ids</span></code></a>(ids, /)</p></td>
<td><p>Get documents by their IDs.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.max_marginal_relevance_search" title="langchain_astradb.vectorstores.AstraDBVectorStore.max_marginal_relevance_search"><code class="xref py py-obj docutils literal notranslate"><span class="pre">max_marginal_relevance_search</span></code></a>(query[, k, ...])</p></td>
<td><p>Return docs selected using the maximal marginal relevance.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.max_marginal_relevance_search_by_vector" title="langchain_astradb.vectorstores.AstraDBVectorStore.max_marginal_relevance_search_by_vector"><code class="xref py py-obj docutils literal notranslate"><span class="pre">max_marginal_relevance_search_by_vector</span></code></a>(...)</p></td>
<td><p>Return docs selected using the maximal marginal relevance.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.metadata_search" title="langchain_astradb.vectorstores.AstraDBVectorStore.metadata_search"><code class="xref py py-obj docutils literal notranslate"><span class="pre">metadata_search</span></code></a>([filter, n])</p></td>
<td><p>Get documents via a metadata search.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.run_query" title="langchain_astradb.vectorstores.AstraDBVectorStore.run_query"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_query</span></code></a>()</p></td>
<td><p>Execute a generic query on stored documents, returning Documents+other info.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.run_query_raw" title="langchain_astradb.vectorstores.AstraDBVectorStore.run_query_raw"><code class="xref py py-obj docutils literal notranslate"><span class="pre">run_query_raw</span></code></a>()</p></td>
<td><p>Execute a generic query on stored documents, returning Astra DB documents.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.search" title="langchain_astradb.vectorstores.AstraDBVectorStore.search"><code class="xref py py-obj docutils literal notranslate"><span class="pre">search</span></code></a>(query, search_type, **kwargs)</p></td>
<td><p>Return docs most similar to query using a specified search type.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search" title="langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search"><code class="xref py py-obj docutils literal notranslate"><span class="pre">similarity_search</span></code></a>(query[, k, filter, ...])</p></td>
<td><p>Return docs most similar to query.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_by_vector" title="langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_by_vector"><code class="xref py py-obj docutils literal notranslate"><span class="pre">similarity_search_by_vector</span></code></a>(embedding[, k, ...])</p></td>
<td><p>Return docs most similar to embedding vector.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_embedding" title="langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_embedding"><code class="xref py py-obj docutils literal notranslate"><span class="pre">similarity_search_with_embedding</span></code></a>(query[, k, ...])</p></td>
<td><p>Return docs most similar to the query with embedding.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_embedding_by_vector" title="langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_embedding_by_vector"><code class="xref py py-obj docutils literal notranslate"><span class="pre">similarity_search_with_embedding_by_vector</span></code></a>(...)</p></td>
<td><p>Return docs most similar to embedding vector with embedding.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_relevance_scores" title="langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_relevance_scores"><code class="xref py py-obj docutils literal notranslate"><span class="pre">similarity_search_with_relevance_scores</span></code></a>(query)</p></td>
<td><p>Return docs and relevance scores in the range [0, 1].</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_score" title="langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_score"><code class="xref py py-obj docutils literal notranslate"><span class="pre">similarity_search_with_score</span></code></a>(query[, k, ...])</p></td>
<td><p>Return docs most similar to query with score.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_score_by_vector" title="langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_score_by_vector"><code class="xref py py-obj docutils literal notranslate"><span class="pre">similarity_search_with_score_by_vector</span></code></a>(embedding)</p></td>
<td><p>Return docs most similar to embedding vector with score.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_score_id" title="langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_score_id"><code class="xref py py-obj docutils literal notranslate"><span class="pre">similarity_search_with_score_id</span></code></a>(query[, k, ...])</p></td>
<td><p>Return docs most similar to the query with score and id.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_score_id_by_vector" title="langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_score_id_by_vector"><code class="xref py py-obj docutils literal notranslate"><span class="pre">similarity_search_with_score_id_by_vector</span></code></a>(...)</p></td>
<td><p>Return docs most similar to embedding vector with score and id.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.update_metadata" title="langchain_astradb.vectorstores.AstraDBVectorStore.update_metadata"><code class="xref py py-obj docutils literal notranslate"><span class="pre">update_metadata</span></code></a>(id_to_metadata, *[, ...])</p></td>
<td><p>Add/overwrite the metadata of existing documents.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">collection_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">embedding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings" title="langchain_core.embeddings.embeddings.Embeddings"><span class="pre">Embeddings</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">TokenProvider</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">api_endpoint</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">environment</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">namespace</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">metric</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">bulk_insert_batch_concurrency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">bulk_insert_overwrite_concurrency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">bulk_delete_concurrency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">setup_mode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../utils/langchain_astradb.utils.astradb.SetupMode.html#langchain_astradb.utils.astradb.SetupMode" title="langchain_astradb.utils.astradb.SetupMode"><span class="pre">SetupMode</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">pre_delete_collection</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">metadata_indexing_include</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">metadata_indexing_exclude</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">collection_indexing_policy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">collection_vector_service_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">VectorServiceOptions</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">collection_embedding_api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">EmbeddingHeadersProvider</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">content_field</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">ignore_invalid_documents</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">autodetect_collection</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">ext_callers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">component_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'langchain_vectorstore'</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">api_options</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">APIOptions</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">collection_rerank</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">CollectionRerankOptions</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">RerankServiceOptions</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">collection_reranking_api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">RerankingHeadersProvider</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">collection_lexical</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">CollectionLexicalOptions</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">hybrid_search</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../utils/langchain_astradb.utils.astradb.HybridSearchMode.html#langchain_astradb.utils.astradb.HybridSearchMode" title="langchain_astradb.utils.astradb.HybridSearchMode"><span class="pre">HybridSearchMode</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">hybrid_limit_factor</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="langchain_astradb.vectorstores.HybridLimitFactorPrescription.html#langchain_astradb.vectorstores.HybridLimitFactorPrescription" title="langchain_astradb.vectorstores.HybridLimitFactorPrescription"><span class="pre">HybridLimitFactorPrescription</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.__init__" title="Link to this definition">#</a></dt>
<dd><p>A vector store which uses DataStax Astra DB as backend.</p>
<p>For more on Astra DB, visit
<a class="reference external" href="https://docs.datastax.com/en/astra-db-serverless/index.html">https://docs.datastax.com/en/astra-db-serverless/index.html</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>embedding</strong> (<a class="reference internal" href="../../core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings" title="langchain_core.embeddings.embeddings.Embeddings"><em>Embeddings</em></a><em> | </em><em>None</em>) – the embeddings function or service to use.
This enables client-side embedding functions or calls to external
embedding providers. If <code class="docutils literal notranslate"><span class="pre">embedding</span></code> is passed, then
<code class="docutils literal notranslate"><span class="pre">collection_vector_service_options</span></code> can not be provided.</p></li>
<li><p><strong>collection_name</strong> (<em>str</em>) – name of the Astra DB collection to create/use.</p></li>
<li><p><strong>token</strong> (<em>str</em><em> | </em><em>TokenProvider</em><em> | </em><em>None</em>) – API token for Astra DB usage, either in the form of a string
or a subclass of <code class="docutils literal notranslate"><span class="pre">astrapy.authentication.TokenProvider</span></code>.
If not provided, the environment variable
ASTRA_DB_APPLICATION_TOKEN is inspected.</p></li>
<li><p><strong>api_endpoint</strong> (<em>str</em><em> | </em><em>None</em>) – full URL to the API endpoint, such as
<code class="docutils literal notranslate"><span class="pre">https://&lt;DB-ID&gt;-us-east1.apps.astra.datastax.com</span></code>. If not provided,
the environment variable ASTRA_DB_API_ENDPOINT is inspected.</p></li>
<li><p><strong>environment</strong> (<em>str</em><em> | </em><em>None</em>) – a string specifying the environment of the target Data API.
If omitted, defaults to “prod” (Astra DB production).
Other values are in <code class="docutils literal notranslate"><span class="pre">astrapy.constants.Environment</span></code> enum class.</p></li>
<li><p><strong>namespace</strong> (<em>str</em><em> | </em><em>None</em>) – namespace (aka keyspace) where the collection is created.
If not provided, the environment variable ASTRA_DB_KEYSPACE is
inspected. Defaults to the database’s “default namespace”.</p></li>
<li><p><strong>metric</strong> (<em>str</em><em> | </em><em>None</em>) – similarity function to use out of those available in Astra DB.
If left out, it will use Astra DB API’s defaults (i.e. “cosine” - but,
for performance reasons, “dot_product” is suggested if embeddings are
normalized to one).</p></li>
<li><p><strong>batch_size</strong> (<em>int</em><em> | </em><em>None</em>) – Size of document chunks for each individual insertion
API request. If not provided, astrapy defaults are applied.</p></li>
<li><p><strong>bulk_insert_batch_concurrency</strong> (<em>int</em><em> | </em><em>None</em>) – Number of threads or coroutines to insert
batches concurrently.</p></li>
<li><p><strong>bulk_insert_overwrite_concurrency</strong> (<em>int</em><em> | </em><em>None</em>) – Number of threads or coroutines in a
batch to insert pre-existing entries.</p></li>
<li><p><strong>bulk_delete_concurrency</strong> (<em>int</em><em> | </em><em>None</em>) – Number of threads or coroutines for
multiple-entry deletes.</p></li>
<li><p><strong>setup_mode</strong> (<a class="reference internal" href="../utils/langchain_astradb.utils.astradb.SetupMode.html#langchain_astradb.utils.astradb.SetupMode" title="langchain_astradb.utils.astradb.SetupMode"><em>SetupMode</em></a><em> | </em><em>None</em>) – mode used to create the collection (SYNC, ASYNC or OFF).</p></li>
<li><p><strong>pre_delete_collection</strong> (<em>bool</em>) – whether to delete the collection before creating it.
If False and the collection already exists, the collection will be used
as is.</p></li>
<li><p><strong>metadata_indexing_include</strong> (<em>Iterable</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>) – an allowlist of the specific metadata subfields
that should be indexed for later filtering in searches.</p></li>
<li><p><strong>metadata_indexing_exclude</strong> (<em>Iterable</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>) – a denylist of the specific metadata subfields
that should not be indexed for later filtering in searches.</p></li>
<li><p><strong>collection_indexing_policy</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – a full “indexing” specification for
what fields should be indexed for later filtering in searches.
This dict must conform to to the API specifications
(see <a class="reference external" href="https://docs.datastax.com/en/astra-db-serverless/api-reference/collections.html#the-indexing-option">https://docs.datastax.com/en/astra-db-serverless/api-reference/collections.html#the-indexing-option</a>)</p></li>
<li><p><strong>collection_vector_service_options</strong> (<em>VectorServiceOptions</em><em> | </em><em>None</em>) – specifies the use of server-side
embeddings within Astra DB. If passing this parameter, <code class="docutils literal notranslate"><span class="pre">embedding</span></code>
cannot be provided.</p></li>
<li><p><strong>collection_embedding_api_key</strong> (<em>str</em><em> | </em><em>EmbeddingHeadersProvider</em><em> | </em><em>None</em>) – for usage of server-side embeddings
within Astra DB. With this parameter one can supply an API Key
that will be passed to Astra DB with each data request.
This parameter can be either a string or a subclass of
<code class="docutils literal notranslate"><span class="pre">astrapy.authentication.EmbeddingHeadersProvider</span></code>.
This is useful when the service is configured for the collection,
but no corresponding secret is stored within
Astra’s key management system.</p></li>
<li><p><strong>content_field</strong> (<em>str</em><em> | </em><em>None</em>) – name of the field containing the textual content
in the documents when saved on Astra DB. For vectorize collections,
this cannot be specified; for non-vectorize collection, defaults
to “content”.
The special value “*” can be passed only if autodetect_collection=True.
In this case, the actual name of the key for the textual content is
guessed by inspection of a few documents from the collection, under the
assumption that the longer strings are the most likely candidates.
Please understand the limitations of this method and get some
understanding of your data before passing <code class="docutils literal notranslate"><span class="pre">"*"</span></code> for this parameter.</p></li>
<li><p><strong>ignore_invalid_documents</strong> (<em>bool</em>) – if False (default), exceptions are raised
when a document is found on the Astra DB collection that does
not have the expected shape. If set to True, such results
from the database are ignored and a warning is issued. Note
that in this case a similarity search may end up returning fewer
results than the required <code class="docutils literal notranslate"><span class="pre">k</span></code>.</p></li>
<li><p><strong>autodetect_collection</strong> (<em>bool</em>) – if True, turns on autodetect behavior.
The store will look for an existing collection of the provided name
and infer the store settings from it. Default is False.
In autodetect mode, <code class="docutils literal notranslate"><span class="pre">content_field</span></code> can be given as <code class="docutils literal notranslate"><span class="pre">"*"</span></code>, meaning
that an attempt will be made to determine it by inspection (unless
vectorize is enabled, in which case <code class="docutils literal notranslate"><span class="pre">content_field</span></code> is ignored).
In autodetect mode, the store not only determines whether embeddings
are client- or server-side, but - most importantly - switches
automatically between “nested” and “flat” representations of documents
on DB (i.e. having the metadata key-value pairs grouped in a
<code class="docutils literal notranslate"><span class="pre">metadata</span></code> field or spread at the documents’ top-level). The former
scheme is the native mode of the AstraDBVectorStore; the store resorts
to the latter in case of vector collections populated with external
means (such as a third-party data import tool) before applying
an AstraDBVectorStore to them.
Note that the following parameters cannot be used if this is True:
<code class="docutils literal notranslate"><span class="pre">metric</span></code>, <code class="docutils literal notranslate"><span class="pre">setup_mode</span></code>, <code class="docutils literal notranslate"><span class="pre">metadata_indexing_include</span></code>,
<code class="docutils literal notranslate"><span class="pre">metadata_indexing_exclude</span></code>, <code class="docutils literal notranslate"><span class="pre">collection_indexing_policy</span></code>,
<code class="docutils literal notranslate"><span class="pre">collection_vector_service_options</span></code>.</p></li>
<li><p><strong>ext_callers</strong> (<em>list</em><em>[</em><em>tuple</em><em>[</em><em>str</em><em> | </em><em>None</em><em>, </em><em>str</em><em> | </em><em>None</em><em>] </em><em>| </em><em>str</em><em> | </em><em>None</em><em>] </em><em>| </em><em>None</em>) – one or more caller identities to identify Data API calls
in the User-Agent header. This is a list of (name, version) pairs,
or just strings if no version info is provided, which, if supplied,
becomes the leading part of the User-Agent string in all API requests
related to this component.</p></li>
<li><p><strong>component_name</strong> (<em>str</em>) – the string identifying this specific component in the
stack of usage info passed as the User-Agent string to the Data API.
Defaults to “langchain_vectorstore”, but can be overridden if this
component actually serves as the building block for another component
(such as when the vector store is used within a <code class="docutils literal notranslate"><span class="pre">GraphRetriever</span></code>).</p></li>
<li><p><strong>api_options</strong> (<em>APIOptions</em><em> | </em><em>None</em>) – an instance of <code class="docutils literal notranslate"><span class="pre">astrapy.utils.api_options.APIOptions</span></code> that
can be supplied to customize the interaction with the Data API
regarding serialization/deserialization, timeouts, custom headers
and so on. The provided options are applied on top of settings already
tailored to this library, and if specified will take precedence.
Passing None (default) means no customization is requested.
Refer to the astrapy documentation for details.</p></li>
<li><p><strong>collection_rerank</strong> (<em>CollectionRerankOptions</em><em> | </em><em>RerankServiceOptions</em><em> | </em><em>None</em>) – providing reranking settings is necessary to run
hybrid searches for similarity. This parameter can be an instance
of the astrapy classes <cite>CollectionRerankOptions</cite> or
<code class="docutils literal notranslate"><span class="pre">RerankServiceOptions</span></code>.</p></li>
<li><p><strong>collection_reranking_api_key</strong> (<em>str</em><em> | </em><em>RerankingHeadersProvider</em><em> | </em><em>None</em>) – for usage of server-side reranking services
within Astra DB. With this parameter one can supply an API Key
that will be passed to Astra DB with each data request.
This parameter can be either a string or a subclass of
<code class="docutils literal notranslate"><span class="pre">astrapy.authentication.RerankingHeadersProvider</span></code>.
This is useful when the service is configured for the collection,
but no corresponding secret is stored within
Astra’s key management system.</p></li>
<li><p><strong>collection_lexical</strong> (<em>str</em><em> | </em><em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>CollectionLexicalOptions</em><em> | </em><em>None</em>) – configuring a lexical analyzer is necessary to run
lexical and hybrid searches. This parameter can be a string or dict,
which is then passed as-is for the “analyzer” field of a
createCollection’s “$lexical.analyzer” value, or a ready-made
astrapy <cite>CollectionLexicalOptions</cite> object.</p></li>
<li><p><strong>hybrid_search</strong> (<a class="reference internal" href="../utils/langchain_astradb.utils.astradb.HybridSearchMode.html#langchain_astradb.utils.astradb.HybridSearchMode" title="langchain_astradb.utils.astradb.HybridSearchMode"><em>HybridSearchMode</em></a><em> | </em><em>None</em>) – whether similarity searches should be run as Hybrid searches
or not. Values are DEFAULT, ON or OFF. In case of DEFAULT, searches
are performed as permitted by the collection configuration, with a
preference for hybrid search. Forcing this setting to ON for a
non-hybrid-enabled collection would result in a server error when
running searches.</p></li>
<li><p><strong>hybrid_limit_factor</strong> (<em>float</em><em> | </em><em>None</em><em> | </em><em>dict</em><em>[</em><em>str</em><em>, </em><em>float</em><em>] </em><em>| </em><a class="reference internal" href="langchain_astradb.vectorstores.HybridLimitFactorPrescription.html#langchain_astradb.vectorstores.HybridLimitFactorPrescription" title="langchain_astradb.vectorstores.HybridLimitFactorPrescription"><em>HybridLimitFactorPrescription</em></a>) – subsearch “limit” specification for hybrid searches.
If omitted, hybrid searches do not specify it and leave the Data API
to use its defaults.
If a floating-point positive number is provided: each subsearch
participating in the hybrid search (i.e. both the vector-based ANN
and the lexical-based) will be requested to fecth up to
<cite>int(k*hybrid_limit_factor)</cite> items, where <cite>k</cite> is the desired result
count from the whole search.
If a <cite>HybridLimitFactorPrescription</cite> is provided (see the class
docstring for details), separate factors are applied to the vector
and the lexical subsearches. Alternatively, a simple dictionary
with keys “$lexical” and “$vector” achieves the same effect.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For concurrency in synchronous <a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.add_texts" title="langchain_astradb.vectorstores.AstraDBVectorStore.add_texts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_texts()</span></code></a>:, as a rule of thumb,
on a typical client machine it is suggested to keep the quantity
bulk_insert_batch_concurrency * bulk_insert_overwrite_concurrency
much below 1000 to avoid exhausting the client multithreading/networking
resources. The hardcoded defaults are somewhat conservative to meet
most machines’ specs, but a sensible choice to test may be:</p>
<ul class="simple">
<li><p>bulk_insert_batch_concurrency = 80</p></li>
<li><p>bulk_insert_overwrite_concurrency = 10</p></li>
</ul>
<p>A bit of experimentation is required to nail the best results here,
depending on both the machine/network specs and the expected workload
(specifically, how often a write is an update of an existing id).
Remember you can pass concurrency settings to individual calls to
<a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.add_texts" title="langchain_astradb.vectorstores.AstraDBVectorStore.add_texts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_texts()</span></code></a> and <a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.add_documents" title="langchain_astradb.vectorstores.AstraDBVectorStore.add_documents"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_documents()</span></code></a> as well.</p>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.aadd_documents">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aadd_documents</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">documents</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.aadd_documents" title="Link to this definition">#</a></dt>
<dd><p>Async run more documents through the embeddings and add to the vectorstore.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>documents</strong> (<em>list</em><em>[</em><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a><em>]</em>) – Documents to add to the vectorstore.</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>) – Additional keyword arguments.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of IDs of the added texts.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the number of IDs does not match the number of documents.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.aadd_texts">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aadd_texts</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">texts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">metadatas</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">batch_concurrency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">overwrite_concurrency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.aadd_texts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.aadd_texts" title="Link to this definition">#</a></dt>
<dd><p>Run texts through the embeddings and add them to the vectorstore.</p>
<p>If passing explicit ids, those entries whose id is in the store already
will be replaced.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>texts</strong> (<em>Iterable</em><em>[</em><em>str</em><em>]</em>) – Texts to add to the vectorstore.</p></li>
<li><p><strong>metadatas</strong> (<em>list</em><em>[</em><em>dict</em><em>] </em><em>| </em><em>None</em>) – Optional list of metadatas.</p></li>
<li><p><strong>ids</strong> (<em>list</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>) – Optional list of ids.</p></li>
<li><p><strong>batch_size</strong> (<em>int</em><em> | </em><em>None</em>) – Size of document chunks for each individual insertion
API request. If not provided, defaults to the vector-store
overall defaults (which in turn falls to astrapy defaults).</p></li>
<li><p><strong>batch_concurrency</strong> (<em>int</em><em> | </em><em>None</em>) – number of simultaneous coroutines to process
insertion batches concurrently. Defaults to the vector-store
overall setting if not provided.</p></li>
<li><p><strong>overwrite_concurrency</strong> (<em>int</em><em> | </em><em>None</em>) – number of simultaneous coroutines to process
pre-existing documents in each batch. Defaults to the vector-store
overall setting if not provided.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) – Additional arguments are ignored.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The allowed field names for the metadata document attributes must
obey certain rules (such as: keys cannot start with a dollar sign
and cannot be empty).
See <a class="reference external" href="https://docs.datastax.com/en/astra-db-serverless/api-reference/dataapiclient.html#naming-conventions">Naming Conventions</a>
for details.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The list of ids of the added texts.</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>texts</strong> (<em>Iterable</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>metadatas</strong> (<em>list</em><em>[</em><em>dict</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>ids</strong> (<em>list</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>batch_size</strong> (<em>int</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>batch_concurrency</strong> (<em>int</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>overwrite_concurrency</strong> (<em>int</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[str]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.aclear">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aclear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.aclear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.aclear" title="Link to this definition">#</a></dt>
<dd><p>Empty the collection of all its stored entries.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.add_documents">
<span class="sig-name descname"><span class="pre">add_documents</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">documents</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.add_documents" title="Link to this definition">#</a></dt>
<dd><p>Add or update documents in the vectorstore.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>documents</strong> (<em>list</em><em>[</em><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a><em>]</em>) – Documents to add to the vectorstore.</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>) – Additional keyword arguments.
if kwargs contains ids and documents contain ids,
the ids in the kwargs will receive precedence.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of IDs of the added texts.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the number of ids does not match the number of documents.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.add_texts">
<span class="sig-name descname"><span class="pre">add_texts</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">texts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">metadatas</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">batch_concurrency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">overwrite_concurrency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.add_texts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.add_texts" title="Link to this definition">#</a></dt>
<dd><p>Run texts through the embeddings and add them to the vectorstore.</p>
<p>If passing explicit ids, those entries whose id is in the store already
will be replaced.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>texts</strong> (<em>Iterable</em><em>[</em><em>str</em><em>]</em>) – Texts to add to the vectorstore.</p></li>
<li><p><strong>metadatas</strong> (<em>list</em><em>[</em><em>dict</em><em>] </em><em>| </em><em>None</em>) – Optional list of metadatas.</p></li>
<li><p><strong>ids</strong> (<em>list</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>) – Optional list of ids.</p></li>
<li><p><strong>batch_size</strong> (<em>int</em><em> | </em><em>None</em>) – Size of document chunks for each individual insertion
API request. If not provided, defaults to the vector-store
overall defaults (which in turn falls to astrapy defaults).</p></li>
<li><p><strong>batch_concurrency</strong> (<em>int</em><em> | </em><em>None</em>) – number of threads to process
insertion batches concurrently. Defaults to the vector-store
overall setting if not provided.</p></li>
<li><p><strong>overwrite_concurrency</strong> (<em>int</em><em> | </em><em>None</em>) – number of threads to process
pre-existing documents in each batch. Defaults to the vector-store
overall setting if not provided.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) – Additional arguments are ignored.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list[str]</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The allowed field names for the metadata document attributes must
obey certain rules (such as: keys cannot start with a dollar sign
and cannot be empty).
See <a class="reference external" href="https://docs.datastax.com/en/astra-db-serverless/api-reference/dataapiclient.html#naming-conventions">Naming Conventions</a>
for details.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The list of ids of the added texts.</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>texts</strong> (<em>Iterable</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>metadatas</strong> (<em>list</em><em>[</em><em>dict</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>ids</strong> (<em>list</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>batch_size</strong> (<em>int</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>batch_concurrency</strong> (<em>int</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>overwrite_concurrency</strong> (<em>int</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[str]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.adelete">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">adelete</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">concurrency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.adelete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.adelete" title="Link to this definition">#</a></dt>
<dd><p>Delete by vector ids.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ids</strong> (<em>list</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>) – List of ids to delete.</p></li>
<li><p><strong>concurrency</strong> (<em>int</em><em> | </em><em>None</em>) – max number of simultaneous coroutines for single-doc
delete requests. Defaults to vector-store overall setting.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) – Additional arguments are ignored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if deletion is (entirely) successful, False otherwise.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool | None</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.adelete_by_document_id">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">adelete_by_document_id</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.adelete_by_document_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.adelete_by_document_id" title="Link to this definition">#</a></dt>
<dd><p>Remove a single document from the store, given its document ID.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>document_id</strong> (<em>str</em>) – The document ID</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if a document has indeed been deleted, False if ID not found.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.adelete_by_metadata_filter">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">adelete_by_metadata_filter</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.adelete_by_metadata_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.adelete_by_metadata_filter" title="Link to this definition">#</a></dt>
<dd><p>Delete all documents matching a certain metadata filtering condition.</p>
<p>This operation does not use the vector embeddings in any way, it simply
removes all documents whose metadata match the provided condition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – Filter on the metadata to apply. The filter cannot be empty.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A number expressing the amount of deleted documents.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.adelete_collection">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">adelete_collection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.adelete_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.adelete_collection" title="Link to this definition">#</a></dt>
<dd><p>Completely delete the collection from the database.</p>
<p>Completely delete the collection from the database (as opposed
to <a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.aclear" title="langchain_astradb.vectorstores.AstraDBVectorStore.aclear"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aclear()</span></code></a>, which empties it only).
Stored data is lost and unrecoverable, resources are freed.
Use with caution.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.afrom_documents">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">afrom_documents</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">documents</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">embedding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings" title="langchain_core.embeddings.embeddings.Embeddings"><span class="pre">Embeddings</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore" title="langchain_astradb.vectorstores.AstraDBVectorStore"><span class="pre">AstraDBVectorStore</span></a></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.afrom_documents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.afrom_documents" title="Link to this definition">#</a></dt>
<dd><p>Create an Astra DB vectorstore from a document list.</p>
<p>Utility method that defers to <a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.afrom_texts" title="langchain_astradb.vectorstores.AstraDBVectorStore.afrom_texts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">afrom_texts()</span></code></a> (see that one).</p>
<dl class="simple">
<dt>Args: see <a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.afrom_texts" title="langchain_astradb.vectorstores.AstraDBVectorStore.afrom_texts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">afrom_texts()</span></code></a>, except here you have to supply <code class="docutils literal notranslate"><span class="pre">documents</span></code></dt><dd><p>in place of <code class="docutils literal notranslate"><span class="pre">texts</span></code> and <code class="docutils literal notranslate"><span class="pre">metadatas</span></code>.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>an <code class="docutils literal notranslate"><span class="pre">AstraDBVectorStore</span></code> vectorstore.</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>documents</strong> (<em>list</em><em>[</em><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a><em>]</em>)</p></li>
<li><p><strong>embedding</strong> (<a class="reference internal" href="../../core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings" title="langchain_core.embeddings.embeddings.Embeddings"><em>Embeddings</em></a><em> | </em><em>None</em>)</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore" title="langchain_astradb.vectorstores.AstraDBVectorStore">AstraDBVectorStore</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.afrom_texts">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">afrom_texts</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">texts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">embedding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings" title="langchain_core.embeddings.embeddings.Embeddings"><span class="pre">Embeddings</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">metadatas</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore" title="langchain_astradb.vectorstores.AstraDBVectorStore"><span class="pre">AstraDBVectorStore</span></a></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.afrom_texts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.afrom_texts" title="Link to this definition">#</a></dt>
<dd><p>Create an Astra DB vectorstore from raw texts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>texts</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – the texts to insert.</p></li>
<li><p><strong>embedding</strong> (<a class="reference internal" href="../../core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings" title="langchain_core.embeddings.embeddings.Embeddings"><em>Embeddings</em></a><em> | </em><em>None</em>) – embedding function to use.</p></li>
<li><p><strong>metadatas</strong> (<em>list</em><em>[</em><em>dict</em><em>] </em><em>| </em><em>None</em>) – metadata dicts for the texts.</p></li>
<li><p><strong>ids</strong> (<em>list</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>) – ids to associate to the texts.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) – you can pass any argument that you would
to <a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.aadd_texts" title="langchain_astradb.vectorstores.AstraDBVectorStore.aadd_texts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aadd_texts()</span></code></a> and/or to the <code class="docutils literal notranslate"><span class="pre">AstraDBVectorStore</span></code>
constructor (see these methods for details). These arguments
will be routed to the respective methods as they are.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an <code class="docutils literal notranslate"><span class="pre">AstraDBVectorStore</span></code> vectorstore.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore" title="langchain_astradb.vectorstores.AstraDBVectorStore">AstraDBVectorStore</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.aget_by_document_id">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aget_by_document_id</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.aget_by_document_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.aget_by_document_id" title="Link to this definition">#</a></dt>
<dd><p>Retrieve a single document from the store, given its document ID.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>document_id</strong> (<em>str</em>) – The document ID</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The the document if it exists. Otherwise None.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a> | None</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.aget_by_ids">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aget_by_ids</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="positional-only-separator o"><abbr title="Positional-only parameter separator (PEP 570)"><span class="pre">/</span></abbr></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.aget_by_ids" title="Link to this definition">#</a></dt>
<dd><p>Async get documents by their IDs.</p>
<p>The returned documents are expected to have the ID field set to the ID of the
document in the vector store.</p>
<p>Fewer documents may be returned than requested if some IDs are not found or
if there are duplicated IDs.</p>
<p>Users should not assume that the order of the returned documents matches
the order of the input IDs. Instead, users should rely on the ID field of the
returned documents.</p>
<p>This method should <strong>NOT</strong> raise exceptions if no documents are found for
some IDs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ids</strong> (<em>Sequence</em><em>[</em><em>str</em><em>]</em>) – List of ids to retrieve.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of Documents.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document">Document</a>]</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.2.11.</span></p>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.amax_marginal_relevance_search">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">amax_marginal_relevance_search</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">fetch_k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">20</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">lambda_mult</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.5</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.amax_marginal_relevance_search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.amax_marginal_relevance_search" title="Link to this definition">#</a></dt>
<dd><p>Return docs selected using the maximal marginal relevance.</p>
<p>Maximal marginal relevance optimizes for similarity to query AND diversity
among selected documents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) – Query to look up documents similar to.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return.</p></li>
<li><p><strong>fetch_k</strong> (<em>int</em>) – Number of Documents to fetch to pass to MMR algorithm.</p></li>
<li><p><strong>lambda_mult</strong> (<em>float</em>) – Number between 0 and 1 that determines the degree
of diversity among the results with 0 corresponding
to maximum diversity and 1 to minimum diversity.</p></li>
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Filter on the metadata to apply.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) – Additional arguments are ignored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of Documents selected by maximal marginal relevance.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.amax_marginal_relevance_search_by_vector">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">amax_marginal_relevance_search_by_vector</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">embedding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">fetch_k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">20</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">lambda_mult</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.5</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.amax_marginal_relevance_search_by_vector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.amax_marginal_relevance_search_by_vector" title="Link to this definition">#</a></dt>
<dd><p>Return docs selected using the maximal marginal relevance.</p>
<p>Maximal marginal relevance optimizes for similarity to query AND diversity
among selected documents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>embedding</strong> (<em>list</em><em>[</em><em>float</em><em>]</em>) – Embedding to look up documents similar to.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return.</p></li>
<li><p><strong>fetch_k</strong> (<em>int</em>) – Number of Documents to fetch to pass to MMR algorithm.</p></li>
<li><p><strong>lambda_mult</strong> (<em>float</em>) – Number between 0 and 1 that determines the degree
of diversity among the results with 0 corresponding
to maximum diversity and 1 to minimum diversity.</p></li>
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Filter on the metadata to apply.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) – Additional arguments are ignored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of Documents selected by maximal marginal relevance.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.ametadata_search">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">ametadata_search</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.ametadata_search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.ametadata_search" title="Link to this definition">#</a></dt>
<dd><p>Get documents via a metadata search.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – the metadata to query for.</p></li>
<li><p><strong>n</strong> (<em>int</em>) – the maximum number of documents to return.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Iterable</em>[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.arun_query">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arun_query</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_sort_vector</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">False</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_similarity</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_embeddings</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">AsyncIterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="langchain_astradb.vectorstores.AstraDBQueryResult.html#langchain_astradb.vectorstores.AstraDBQueryResult" title="langchain_astradb.vectorstores.AstraDBQueryResult"><span class="pre">AstraDBQueryResult</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.arun_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.arun_query" title="Link to this definition">#</a></dt>
<dt class="sig sig-object py">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arun_query</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_sort_vector</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">True</span></span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_similarity</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_embeddings</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">AsyncIterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="langchain_astradb.vectorstores.AstraDBQueryResult.html#langchain_astradb.vectorstores.AstraDBQueryResult" title="langchain_astradb.vectorstores.AstraDBQueryResult"><span class="pre">AstraDBQueryResult</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Execute a generic query on stored documents, returning Documents+other info.</p>
<p>The return value has a variable format, depending on whether the ‘sort vector’
is requested back from the server.</p>
<p>Only the <cite>n</cite> parameter is required. Omitting all other parameters results
in a query that matches each and every document found on the collection.</p>
<p>The method does not expose a projection directly, which is instead
automatically determined based on the invocation options.</p>
<p>The returned Document objects are codec-independent.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> – amount of items to return. Fewer items than <cite>n</cite> may be returned  if
the collection has not enough matches.</p></li>
<li><p><strong>ids</strong> – a list of document IDs to restrict the query to. If this is supplied,
only document with an ID among the provided one will match. If further
query filters are provided (i.e. metadata), matches must satisfy both
requirements.</p></li>
<li><p><strong>filter</strong> – a metadata filtering part. If provided, it must refer to
metadata keys by their bare name (such as <cite>{“key”: 123}</cite>).
This filter can combine nested conditions with “$or”/”$and” connectors,
for example:
- <cite>{“tag”: “a”}</cite>
- <cite>{“$or”: [{“tag”: “a”}, “label”: “b”]}</cite>
- <cite>{“$and”: [{“tag”: {“$in”: [“a”, “z”]}}, “label”: “b”]}</cite></p></li>
<li><p><strong>sort</strong> – a ‘sort’ clause for the query, such as <cite>{“$vector”: […]}</cite>,
<cite>{“$vectorize”: “…”}</cite> or <cite>{“mdkey”: 1}</cite>. Metadata sort conditions
must be expressed by their ‘bare’ name.</p></li>
<li><p><strong>include_similarity</strong> – whether to return similarity scores with each match.
Requires vector sort.</p></li>
<li><p><strong>include_sort_vector</strong> – whether to return the very query vector used for the
ANN search alongside the iterable of results. Requires vector sort.
Note that the shape of the return value depends on this parameter.</p></li>
<li><p><strong>include_embeddings</strong> – whether to retrieve the matches’ own embedding vectors.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><dl class="simple">
<dt>if <cite>include_sort_vector = False</cite>, the return value is an iterable over</dt><dd><p>the AstraDBQueryResult items returned by the query. Entries that fail
the decoding step, if any, are discarded after the query, which may
lead to fewer items being returned than the required <cite>n</cite>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>if <cite>include_sort_vector = True</cite>, the return value is a 2-item tuple</dt><dd><p><cite>(sort_v, results_ite)</cite> tuple, where:
- <cite>sort_v</cite> is the sort vector, if requested, or None if not available.
- <cite>results_ite</cite> is an iterable over AstraDBQueryResult items as above.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>The shape of the return value depends on the value of <cite>include_sort_vector</cite></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.arun_query_raw">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arun_query_raw</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_sort_vector</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">False</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_similarity</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_embeddings</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">AsyncIterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.arun_query_raw"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.arun_query_raw" title="Link to this definition">#</a></dt>
<dt class="sig sig-object py">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">arun_query_raw</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_sort_vector</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">True</span></span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_similarity</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_embeddings</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">AsyncIterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Execute a generic query on stored documents, returning Astra DB documents.</p>
<p>The return value has a variable format, depending on whether the ‘sort vector’
is requested back from the server.</p>
<p>Only the <cite>n</cite> parameter is required. Omitting all other parameters results
in a query that matches each and every document found on the collection.</p>
<p>The method does not expose a projection directly, which is instead
automatically determined based on the invocation options.</p>
<p>The returned documents are exactly as they come back from Astra DB (taking
into account the projection as well). A further step, namely subsequent
invocation of the <cite>convert_astra_db_document</cite> method, is required to reconstruct
codec-independent Document objects.
The reason for keeping the retrieval and the decoding steps separate is that
a caller may want to first deduplicate/discard items, in order to convert only
the items actually needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> – amount of items to return. Fewer items than <cite>n</cite> may be returned in the
following cases: (a) the decoding skips some raw entries from
the server; (b) the collection has not enough matches.</p></li>
<li><p><strong>ids</strong> – a list of document IDs to restrict the query to. If this is supplied,
only document with an ID among the provided one will match. If further
query filters are provided (i.e. metadata), matches must satisfy both
requirements.</p></li>
<li><p><strong>filter</strong> – a metadata filtering part. If provided, it must refer to
metadata keys by their bare name (such as <cite>{“key”: 123}</cite>).
This filter can combine nested conditions with “$or”/”$and” connectors,
for example:
- <cite>{“tag”: “a”}</cite>
- <cite>{“$or”: [{“tag”: “a”}, “label”: “b”]}</cite>
- <cite>{“$and”: [{“tag”: {“$in”: [“a”, “z”]}}, “label”: “b”]}</cite></p></li>
<li><p><strong>sort</strong> – a ‘sort’ clause for the query, such as <cite>{“$vector”: […]}</cite>,
<cite>{“$vectorize”: “…”}</cite> or <cite>{“mdkey”: 1}</cite>. Metadata sort conditions
must be expressed by their ‘bare’ name.</p></li>
<li><p><strong>include_similarity</strong> – whether to return similarity scores with each match.
Requires vector sort.</p></li>
<li><p><strong>include_sort_vector</strong> – whether to return the very query vector used for the
ANN search alongside the iterable of results. Requires vector sort.
Note that the shape of the return value depends on this parameter.</p></li>
<li><p><strong>include_embeddings</strong> – whether to retrieve the matches’ own embedding vectors.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><dl class="simple">
<dt>if <cite>include_sort_vector = False</cite>, the return value is an iterable over</dt><dd><p>Astra DB documents (dictionaries);</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>if <cite>include_sort_vector = True</cite>, the return value is a 2-item tuple</dt><dd><p><cite>(sort_v, astra_db_ite)</cite> tuple, where:
- <cite>sort_v</cite> is the sort vector, if requested, or None if not available.
- <cite>astra_db_ite</cite> is an iterable over Astra DB documents (dictionaries).</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>The shape of the return value depends on the value of <cite>include_sort_vector</cite></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.as_retriever">
<span class="sig-name descname"><span class="pre">as_retriever</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/vectorstores/langchain_core.vectorstores.base.VectorStoreRetriever.html#langchain_core.vectorstores.base.VectorStoreRetriever" title="langchain_core.vectorstores.base.VectorStoreRetriever"><span class="pre">VectorStoreRetriever</span></a></span></span><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.as_retriever" title="Link to this definition">#</a></dt>
<dd><p>Return VectorStoreRetriever initialized from this VectorStore.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>**kwargs</strong> (<em>Any</em>) – <p>Keyword arguments to pass to the search function.
Can include:
search_type (Optional[str]): Defines the type of search that</p>
<blockquote>
<div><p>the Retriever should perform.
Can be “similarity” (default), “mmr”, or
“similarity_score_threshold”.</p>
</div></blockquote>
<dl>
<dt>search_kwargs (Optional[Dict]): Keyword arguments to pass to the</dt><dd><dl>
<dt>search function. Can include things like:</dt><dd><p>k: Amount of documents to return (Default: 4)
score_threshold: Minimum relevance threshold</p>
<blockquote>
<div><p>for similarity_score_threshold</p>
</div></blockquote>
<dl class="simple">
<dt>fetch_k: Amount of documents to pass to MMR algorithm</dt><dd><p>(Default: 20)</p>
</dd>
<dt>lambda_mult: Diversity of results returned by MMR;</dt><dd><p>1 for minimum diversity and 0 for maximum. (Default: 0.5)</p>
</dd>
</dl>
<p>filter: Filter by document metadata</p>
</dd>
</dl>
</dd>
</dl>
</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Retriever class for VectorStore.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../../core/vectorstores/langchain_core.vectorstores.base.VectorStoreRetriever.html#langchain_core.vectorstores.base.VectorStoreRetriever" title="langchain_core.vectorstores.base.VectorStoreRetriever">VectorStoreRetriever</a></p>
</dd>
</dl>
<p>Examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve more documents with higher diversity</span>
<span class="c1"># Useful if your dataset has many similar documents</span>
<span class="n">docsearch</span><span class="o">.</span><span class="n">as_retriever</span><span class="p">(</span>
    <span class="n">search_type</span><span class="o">=</span><span class="s2">"mmr"</span><span class="p">,</span>
    <span class="n">search_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">'k'</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="s1">'lambda_mult'</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">}</span>
<span class="p">)</span>

<span class="c1"># Fetch more documents for the MMR algorithm to consider</span>
<span class="c1"># But only return the top 5</span>
<span class="n">docsearch</span><span class="o">.</span><span class="n">as_retriever</span><span class="p">(</span>
    <span class="n">search_type</span><span class="o">=</span><span class="s2">"mmr"</span><span class="p">,</span>
    <span class="n">search_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">'k'</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">'fetch_k'</span><span class="p">:</span> <span class="mi">50</span><span class="p">}</span>
<span class="p">)</span>

<span class="c1"># Only retrieve documents that have a relevance score</span>
<span class="c1"># Above a certain threshold</span>
<span class="n">docsearch</span><span class="o">.</span><span class="n">as_retriever</span><span class="p">(</span>
    <span class="n">search_type</span><span class="o">=</span><span class="s2">"similarity_score_threshold"</span><span class="p">,</span>
    <span class="n">search_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">'score_threshold'</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">}</span>
<span class="p">)</span>

<span class="c1"># Only get the single most similar document from the dataset</span>
<span class="n">docsearch</span><span class="o">.</span><span class="n">as_retriever</span><span class="p">(</span><span class="n">search_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">'k'</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>

<span class="c1"># Use a filter to only retrieve documents from a specific paper</span>
<span class="n">docsearch</span><span class="o">.</span><span class="n">as_retriever</span><span class="p">(</span>
    <span class="n">search_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">'filter'</span><span class="p">:</span> <span class="p">{</span><span class="s1">'paper_title'</span><span class="p">:</span><span class="s1">'GPT-4 Technical Report'</span><span class="p">}}</span>
<span class="p">)</span>
</pre></div>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.asearch">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">asearch</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">search_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asearch" title="Link to this definition">#</a></dt>
<dd><p>Async return docs most similar to query using a specified search type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) – Input text.</p></li>
<li><p><strong>search_type</strong> (<em>str</em>) – Type of search to perform. Can be “similarity”,
“mmr”, or “similarity_score_threshold”.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) – Arguments to pass to the search method.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of Documents most similar to the query.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If search_type is not one of “similarity”,
    “mmr”, or “similarity_score_threshold”.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document">Document</a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">asimilarity_search</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">lexical_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.asimilarity_search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search" title="Link to this definition">#</a></dt>
<dd><p>Return docs most similar to query.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) – Query to look up documents similar to.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return. Defaults to 4.</p></li>
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Filter on the metadata to apply.</p></li>
<li><p><strong>lexical_query</strong> (<em>str</em><em> | </em><em>None</em>) – for hybrid search, a specific query for the lexical
portion of the retrieval. If omitted or empty, defaults to the same
as ‘query’. If passed on a non-hybrid search, an error is raised.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) – Additional arguments are ignored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of Documents most similar to the query.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_by_vector">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">asimilarity_search_by_vector</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">embedding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.asimilarity_search_by_vector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_by_vector" title="Link to this definition">#</a></dt>
<dd><p>Return docs most similar to embedding vector.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>embedding</strong> (<em>list</em><em>[</em><em>float</em><em>]</em>) – Embedding to look up documents similar to.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return. Defaults to 4.</p></li>
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Filter on the metadata to apply.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) – Additional arguments are ignored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of Documents most similar to the query vector.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_embedding">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">asimilarity_search_with_embedding</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.asimilarity_search_with_embedding"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_embedding" title="Link to this definition">#</a></dt>
<dd><p>Return docs most similar to the query with embedding.</p>
<p>Also includes the query embedding vector.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) – Query to look up documents similar to.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return. Defaults to 4.</p></li>
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Filter on the metadata to apply.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(The query embedding vector, The list of (Document, embedding),
the most similar to the query vector.).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple[list[float], list[tuple[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>, list[float]]]]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_embedding_by_vector">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">asimilarity_search_with_embedding_by_vector</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">embedding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.asimilarity_search_with_embedding_by_vector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_embedding_by_vector" title="Link to this definition">#</a></dt>
<dd><p>Return docs most similar to embedding vector with embedding.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>embedding</strong> (<em>list</em><em>[</em><em>float</em><em>]</em>) – Embedding to look up documents similar to.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return. Defaults to 4.</p></li>
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Filter on the metadata to apply.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(The query embedding vector, The list of (Document, embedding),
the most similar to the query vector.).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[tuple[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>, list[float]]]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_relevance_scores">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">asimilarity_search_with_relevance_scores</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_relevance_scores" title="Link to this definition">#</a></dt>
<dd><p>Async return docs and relevance scores in the range [0, 1].</p>
<p>0 is dissimilar, 1 is most similar.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) – Input text.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return. Defaults to 4.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) – <p>kwargs to be passed to similarity search. Should include:
score_threshold: Optional, a floating point value between 0 to 1 to</p>
<blockquote>
<div><p>filter the resulting set of retrieved docs</p>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of Tuples of (doc, similarity_score)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[tuple[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document">Document</a>, float]]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_score">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">asimilarity_search_with_score</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">lexical_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.asimilarity_search_with_score"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_score" title="Link to this definition">#</a></dt>
<dd><p>Return docs most similar to query with score.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) – Query to look up documents similar to.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return. Defaults to 4.</p></li>
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Filter on the metadata to apply.</p></li>
<li><p><strong>lexical_query</strong> (<em>str</em><em> | </em><em>None</em>) – for hybrid search, a specific query for the lexical
portion of the retrieval. If omitted or empty, defaults to the same
as ‘query’. If passed on a non-hybrid search, an error is raised.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of (Document, score), the most similar to the query vector.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[tuple[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>, float]]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_score_by_vector">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">asimilarity_search_with_score_by_vector</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">embedding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.asimilarity_search_with_score_by_vector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_score_by_vector" title="Link to this definition">#</a></dt>
<dd><p>Return docs most similar to embedding vector with score.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>embedding</strong> (<em>list</em><em>[</em><em>float</em><em>]</em>) – Embedding to look up documents similar to.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return. Defaults to 4.</p></li>
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Filter on the metadata to apply.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of (Document, score), the most similar to the query vector.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[tuple[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>, float]]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_score_id">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">asimilarity_search_with_score_id</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">lexical_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.asimilarity_search_with_score_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_score_id" title="Link to this definition">#</a></dt>
<dd><p>Return docs most similar to the query with score and id.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) – Query to look up documents similar to.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return. Defaults to 4.</p></li>
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Filter on the metadata to apply.</p></li>
<li><p><strong>lexical_query</strong> (<em>str</em><em> | </em><em>None</em>) – for hybrid search, a specific query for the lexical
portion of the retrieval. If omitted or empty, defaults to the same
as ‘query’. If passed on a non-hybrid search, an error is raised.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of (Document, score, id), the most similar to the query.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[tuple[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>, float, str]]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_score_id_by_vector">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">asimilarity_search_with_score_id_by_vector</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">embedding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.asimilarity_search_with_score_id_by_vector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_score_id_by_vector" title="Link to this definition">#</a></dt>
<dd><p>Return docs most similar to embedding vector with score and id.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>embedding</strong> (<em>list</em><em>[</em><em>float</em><em>]</em>) – Embedding to look up documents similar to.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return. Defaults to 4.</p></li>
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Filter on the metadata to apply.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of (Document, score, id), the most similar to the query vector.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[tuple[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>, float, str]]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.aupdate_metadata">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">aupdate_metadata</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">id_to_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">overwrite_concurrency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.aupdate_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.aupdate_metadata" title="Link to this definition">#</a></dt>
<dd><p>Add/overwrite the metadata of existing documents.</p>
<p>For each document to update, the new metadata dictionary is appended
to the existing metadata, overwriting individual keys that existed already.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id_to_metadata</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>dict</em><em>]</em>) – map from the Document IDs to modify to the
new metadata for updating. Keys in this dictionary that
do not correspond to an existing document will be silently ignored.
The values of this map are metadata dictionaries for updating
the documents. Any pre-existing metadata will be merged with
these entries, which take precedence on a key-by-key basis.</p></li>
<li><p><strong>overwrite_concurrency</strong> (<em>int</em><em> | </em><em>None</em>) – number of asynchronous tasks to process the updates.
Defaults to the vector-store overall setting if not provided.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the number of documents successfully updated (i.e. found to exist,
since even an update with <cite>{}</cite> as the new metadata counts as successful.)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.clear">
<span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.clear"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.clear" title="Link to this definition">#</a></dt>
<dd><p>Empty the collection of all its stored entries.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.copy">
<span class="sig-name descname"><span class="pre">copy</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">token</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">TokenProvider</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">ext_callers</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">component_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">collection_embedding_api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">EmbeddingHeadersProvider</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">collection_reranking_api_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">RerankingHeadersProvider</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore" title="langchain_astradb.vectorstores.AstraDBVectorStore"><span class="pre">AstraDBVectorStore</span></a></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.copy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.copy" title="Link to this definition">#</a></dt>
<dd><p>Create a copy, possibly with changed attributes.</p>
<p>This method creates a shallow copy of this environment. If a parameter
is passed and differs from None, it will replace the corresponding value
in the copy.</p>
<p>The method allows changing only the parameters that ensure the copy is
functional and does not trigger side-effects:
for example, one cannot create a copy acting on a new collection.
In those cases, one should create a new instance of <code class="docutils literal notranslate"><span class="pre">AstraDBVectorStore</span></code>
from scratch.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>token</strong> (<em>str</em><em> | </em><em>TokenProvider</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>ext_callers</strong> (<em>list</em><em>[</em><em>tuple</em><em>[</em><em>str</em><em> | </em><em>None</em><em>, </em><em>str</em><em> | </em><em>None</em><em>] </em><em>| </em><em>str</em><em> | </em><em>None</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>component_name</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>collection_embedding_api_key</strong> (<em>str</em><em> | </em><em>EmbeddingHeadersProvider</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>collection_reranking_api_key</strong> (<em>str</em><em> | </em><em>RerankingHeadersProvider</em><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore" title="langchain_astradb.vectorstores.AstraDBVectorStore">AstraDBVectorStore</a></p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.token">
<span class="sig-name descname"><span class="pre">token</span></span><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.token" title="Link to this definition">#</a></dt>
<dd><p>API token for Astra DB usage, either in the form of a string
or a subclass of <code class="docutils literal notranslate"><span class="pre">astrapy.authentication.TokenProvider</span></code>.
In order to suppress token usage in the copy, explicitly pass
<code class="docutils literal notranslate"><span class="pre">astrapy.authentication.StaticTokenProvider(None)</span></code>.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.ext_callers">
<span class="sig-name descname"><span class="pre">ext_callers</span></span><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.ext_callers" title="Link to this definition">#</a></dt>
<dd><p>additional custom (caller_name, caller_version) pairs
to attach to the User-Agent header when issuing Data API requests.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.component_name">
<span class="sig-name descname"><span class="pre">component_name</span></span><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.component_name" title="Link to this definition">#</a></dt>
<dd><p>a value for the LangChain component name to use when
identifying the originator of the Data API requests.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.collection_embedding_api_key">
<span class="sig-name descname"><span class="pre">collection_embedding_api_key</span></span><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.collection_embedding_api_key" title="Link to this definition">#</a></dt>
<dd><p>the API Key to supply in each Data API
request if necessary. This is necessary if using the Vectorize
feature and no secret is stored with the database.
In order to suppress the API Key in the copy, explicitly pass
<code class="docutils literal notranslate"><span class="pre">astrapy.authentication.EmbeddingAPIKeyHeaderProvider(None)</span></code>.</p>
</dd></dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.collection_reranking_api_key">
<span class="sig-name descname"><span class="pre">collection_reranking_api_key</span></span><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.collection_reranking_api_key" title="Link to this definition">#</a></dt>
<dd><p>for usage of server-side reranking services
within Astra DB. With this parameter one can supply an API Key
that will be passed to Astra DB with each data request.
This parameter can be either a string or a subclass of
<code class="docutils literal notranslate"><span class="pre">astrapy.authentication.RerankingHeadersProvider</span></code>.
This is useful when the service is configured for the collection,
but no corresponding secret is stored within
Astra’s key management system.</p>
</dd></dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.delete">
<span class="sig-name descname"><span class="pre">delete</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">concurrency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.delete"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.delete" title="Link to this definition">#</a></dt>
<dd><p>Delete by vector ids.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ids</strong> (<em>list</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>) – List of ids to delete.</p></li>
<li><p><strong>concurrency</strong> (<em>int</em><em> | </em><em>None</em>) – max number of threads issuing single-doc delete requests.
Defaults to vector-store overall setting.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) – Additional arguments are ignored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if deletion is (entirely) successful, False otherwise.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool | None</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.delete_by_document_id">
<span class="sig-name descname"><span class="pre">delete_by_document_id</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.delete_by_document_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.delete_by_document_id" title="Link to this definition">#</a></dt>
<dd><p>Remove a single document from the store, given its document ID.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>document_id</strong> (<em>str</em>) – The document ID</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if a document has indeed been deleted, False if ID not found.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.delete_by_metadata_filter">
<span class="sig-name descname"><span class="pre">delete_by_metadata_filter</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.delete_by_metadata_filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.delete_by_metadata_filter" title="Link to this definition">#</a></dt>
<dd><p>Delete all documents matching a certain metadata filtering condition.</p>
<p>This operation does not use the vector embeddings in any way, it simply
removes all documents whose metadata match the provided condition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – Filter on the metadata to apply. The filter cannot be empty.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A number expressing the amount of deleted documents.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.delete_collection">
<span class="sig-name descname"><span class="pre">delete_collection</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.delete_collection"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.delete_collection" title="Link to this definition">#</a></dt>
<dd><p>Completely delete the collection from the database.</p>
<p>Completely delete the collection from the database (as opposed
to <a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.clear" title="langchain_astradb.vectorstores.AstraDBVectorStore.clear"><code class="xref py py-meth docutils literal notranslate"><span class="pre">clear()</span></code></a>, which empties it only).
Stored data is lost and unrecoverable, resources are freed.
Use with caution.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.filter_to_query">
<span class="sig-name descname"><span class="pre">filter_to_query</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">filter_dict</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.filter_to_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.filter_to_query" title="Link to this definition">#</a></dt>
<dd><p>Prepare a query for use on DB based on metadata filter.</p>
<p>Encode an “abstract” filter clause on metadata into a query filter
condition aware of the collection schema choice.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filter_dict</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – a metadata condition in the form {“field”: “value”}
or related.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the corresponding mapping ready for use in queries,
aware of the details of the schema used to encode the document on DB.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict[str, <em>Any</em>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.from_documents">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_documents</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">documents</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">embedding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings" title="langchain_core.embeddings.embeddings.Embeddings"><span class="pre">Embeddings</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore" title="langchain_astradb.vectorstores.AstraDBVectorStore"><span class="pre">AstraDBVectorStore</span></a></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.from_documents"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.from_documents" title="Link to this definition">#</a></dt>
<dd><p>Create an Astra DB vectorstore from a document list.</p>
<p>Utility method that defers to <a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.from_texts" title="langchain_astradb.vectorstores.AstraDBVectorStore.from_texts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">from_texts()</span></code></a> (see that one).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>texts</strong> – the texts to insert.</p></li>
<li><p><strong>documents</strong> (<em>list</em><em>[</em><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a><em>]</em>) – a list of <cite>Document</cite> objects for insertion in the store.</p></li>
<li><p><strong>embedding</strong> (<a class="reference internal" href="../../core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings" title="langchain_core.embeddings.embeddings.Embeddings"><em>Embeddings</em></a><em> | </em><em>None</em>) – the embedding function to use in the store.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) – you can pass any argument that you would
to <a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.add_texts" title="langchain_astradb.vectorstores.AstraDBVectorStore.add_texts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_texts()</span></code></a> and/or to the
<code class="docutils literal notranslate"><span class="pre">AstraDBVectorStore</span></code> constructor (see these methods for
details). These arguments will be
routed to the respective methods as they are.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an <code class="docutils literal notranslate"><span class="pre">AstraDBVectorStore</span></code> vectorstore.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore" title="langchain_astradb.vectorstores.AstraDBVectorStore">AstraDBVectorStore</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.from_texts">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_texts</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">texts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">embedding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="../../core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings" title="langchain_core.embeddings.embeddings.Embeddings"><span class="pre">Embeddings</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">metadatas</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore" title="langchain_astradb.vectorstores.AstraDBVectorStore"><span class="pre">AstraDBVectorStore</span></a></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.from_texts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.from_texts" title="Link to this definition">#</a></dt>
<dd><p>Create an Astra DB vectorstore from raw texts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>texts</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – the texts to insert.</p></li>
<li><p><strong>embedding</strong> (<a class="reference internal" href="../../core/embeddings/langchain_core.embeddings.embeddings.Embeddings.html#langchain_core.embeddings.embeddings.Embeddings" title="langchain_core.embeddings.embeddings.Embeddings"><em>Embeddings</em></a><em> | </em><em>None</em>) – the embedding function to use in the store.</p></li>
<li><p><strong>metadatas</strong> (<em>list</em><em>[</em><em>dict</em><em>] </em><em>| </em><em>None</em>) – metadata dicts for the texts.</p></li>
<li><p><strong>ids</strong> (<em>list</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>) – ids to associate to the texts.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) – you can pass any argument that you would
to <a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore.add_texts" title="langchain_astradb.vectorstores.AstraDBVectorStore.add_texts"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_texts()</span></code></a> and/or to the
<code class="docutils literal notranslate"><span class="pre">AstraDBVectorStore</span></code> constructor (see these methods for
details). These arguments will be
routed to the respective methods as they are.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>an <code class="docutils literal notranslate"><span class="pre">AstraDBVectorStore</span></code> vectorstore.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#langchain_astradb.vectorstores.AstraDBVectorStore" title="langchain_astradb.vectorstores.AstraDBVectorStore">AstraDBVectorStore</a></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.full_decode_astra_db_found_document">
<span class="sig-name descname"><span class="pre">full_decode_astra_db_found_document</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">astra_db_document</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference internal" href="langchain_astradb.vectorstores.AstraDBQueryResult.html#langchain_astradb.vectorstores.AstraDBQueryResult" title="langchain_astradb.vectorstores.AstraDBQueryResult"><span class="pre">AstraDBQueryResult</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.full_decode_astra_db_found_document"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.full_decode_astra_db_found_document" title="Link to this definition">#</a></dt>
<dd><p>Decode an Astra DB document in full, i.e. into Document+embedding/similarity.</p>
<p>This operation returns a representation that is independent of the codec
being used in the collection (whereas the input, a ‘raw’ Astra DB document,
is codec-dependent).</p>
<p>The input raw document can carry information on embedding and similarity,
depending on details of the query used to retrieve it. These can be set
to None in the resulf if not found.</p>
<p>The whole method can return a None, to signal that the codec has refused
the conversion (e.g. because the input document is deemed faulty).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>astra_db_document</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – a dictionary obtained through <cite>run_query_raw</cite> from
the collection.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>a AstraDBQueryResult named tuple with Document, id, embedding</dt><dd><p>(where applicable) and similarity (where applicable),
or an overall None if the decoding is refused by the codec.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="langchain_astradb.vectorstores.AstraDBQueryResult.html#langchain_astradb.vectorstores.AstraDBQueryResult" title="langchain_astradb.vectorstores.AstraDBQueryResult"><em>AstraDBQueryResult</em></a> | None</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.full_decode_astra_db_reranked_result">
<span class="sig-name descname"><span class="pre">full_decode_astra_db_reranked_result</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">astra_db_reranked_result</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">RerankedResult</span><span class="p"><span class="pre">[</span></span><span class="pre">DocDict</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference internal" href="langchain_astradb.vectorstores.AstraDBQueryResult.html#langchain_astradb.vectorstores.AstraDBQueryResult" title="langchain_astradb.vectorstores.AstraDBQueryResult"><span class="pre">AstraDBQueryResult</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.full_decode_astra_db_reranked_result"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.full_decode_astra_db_reranked_result" title="Link to this definition">#</a></dt>
<dd><p>Full-decode an Astra DB find-and-rerank hit (Document+embedding/similarity).</p>
<p>This operation returns a representation that is independent of the codec
being used in the collection (whereas the ‘document’ part of the input,
a ‘raw’ Astra DB response from a find-and-rerank hybrid search, is
codec-dependent).</p>
<p>The input raw document is what the find_and_rerank Astrapy method returns,
i.e. an iterable over RerankedResult objects. Missing entries (such as
the embedding) are  set to None in the resulf if not found.</p>
<p>The whole method can return a None, to signal that the codec has refused
the conversion (e.g. because the input document is deemed faulty).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>astra_db_reranked_result</strong> (<em>RerankedResult</em><em>[</em><em>DocDict</em><em>]</em>) – a RerankedResult obtained by a <cite>find_and_rerank</cite>
method call on the collection.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>a AstraDBQueryResult named tuple with Document, id, embedding</dt><dd><p>(where applicable) and similarity (where applicable),
or an overall None if the decoding is refused by the codec.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="langchain_astradb.vectorstores.AstraDBQueryResult.html#langchain_astradb.vectorstores.AstraDBQueryResult" title="langchain_astradb.vectorstores.AstraDBQueryResult">AstraDBQueryResult</a> | None</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.get_by_document_id">
<span class="sig-name descname"><span class="pre">get_by_document_id</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">document_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.get_by_document_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.get_by_document_id" title="Link to this definition">#</a></dt>
<dd><p>Retrieve a single document from the store, given its document ID.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>document_id</strong> (<em>str</em>) – The document ID</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The the document if it exists. Otherwise None.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a> | None</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.get_by_ids">
<span class="sig-name descname"><span class="pre">get_by_ids</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="positional-only-separator o"><abbr title="Positional-only parameter separator (PEP 570)"><span class="pre">/</span></abbr></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.get_by_ids" title="Link to this definition">#</a></dt>
<dd><p>Get documents by their IDs.</p>
<p>The returned documents are expected to have the ID field set to the ID of the
document in the vector store.</p>
<p>Fewer documents may be returned than requested if some IDs are not found or
if there are duplicated IDs.</p>
<p>Users should not assume that the order of the returned documents matches
the order of the input IDs. Instead, users should rely on the ID field of the
returned documents.</p>
<p>This method should <strong>NOT</strong> raise exceptions if no documents are found for
some IDs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ids</strong> (<em>Sequence</em><em>[</em><em>str</em><em>]</em>) – List of ids to retrieve.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of Documents.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document">Document</a>]</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 0.2.11.</span></p>
</div>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.max_marginal_relevance_search">
<span class="sig-name descname"><span class="pre">max_marginal_relevance_search</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">fetch_k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">20</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">lambda_mult</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.5</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.max_marginal_relevance_search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.max_marginal_relevance_search" title="Link to this definition">#</a></dt>
<dd><p>Return docs selected using the maximal marginal relevance.</p>
<p>Maximal marginal relevance optimizes for similarity to query AND diversity
among selected documents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) – Query to look up documents similar to.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return.</p></li>
<li><p><strong>fetch_k</strong> (<em>int</em>) – Number of Documents to fetch to pass to MMR algorithm.</p></li>
<li><p><strong>lambda_mult</strong> (<em>float</em>) – Number between 0 and 1 that determines the degree
of diversity among the results with 0 corresponding
to maximum diversity and 1 to minimum diversity.</p></li>
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Filter on the metadata to apply.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) – Additional arguments are ignored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of Documents selected by maximal marginal relevance.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.max_marginal_relevance_search_by_vector">
<span class="sig-name descname"><span class="pre">max_marginal_relevance_search_by_vector</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">embedding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">fetch_k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">20</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">lambda_mult</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.5</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.max_marginal_relevance_search_by_vector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.max_marginal_relevance_search_by_vector" title="Link to this definition">#</a></dt>
<dd><p>Return docs selected using the maximal marginal relevance.</p>
<p>Maximal marginal relevance optimizes for similarity to query AND diversity
among selected documents.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>embedding</strong> (<em>list</em><em>[</em><em>float</em><em>]</em>) – Embedding to look up documents similar to.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return.</p></li>
<li><p><strong>fetch_k</strong> (<em>int</em>) – Number of Documents to fetch to pass to MMR algorithm.</p></li>
<li><p><strong>lambda_mult</strong> (<em>float</em>) – Number between 0 and 1 that determines the degree
of diversity among the results with 0 corresponding
to maximum diversity and 1 to minimum diversity.</p></li>
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Filter on the metadata to apply.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) – Additional arguments are ignored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of Documents selected by maximal marginal relevance.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.metadata_search">
<span class="sig-name descname"><span class="pre">metadata_search</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">5</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.metadata_search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.metadata_search" title="Link to this definition">#</a></dt>
<dd><p>Get documents via a metadata search.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – the metadata to query for.</p></li>
<li><p><strong>n</strong> (<em>int</em>) – the maximum number of documents to return.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.run_query">
<span class="sig-name descname"><span class="pre">run_query</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_sort_vector</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">False</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_similarity</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_embeddings</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="langchain_astradb.vectorstores.AstraDBQueryResult.html#langchain_astradb.vectorstores.AstraDBQueryResult" title="langchain_astradb.vectorstores.AstraDBQueryResult"><span class="pre">AstraDBQueryResult</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.run_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.run_query" title="Link to this definition">#</a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">run_query</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_sort_vector</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">True</span></span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_similarity</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_embeddings</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="langchain_astradb.vectorstores.AstraDBQueryResult.html#langchain_astradb.vectorstores.AstraDBQueryResult" title="langchain_astradb.vectorstores.AstraDBQueryResult"><span class="pre">AstraDBQueryResult</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Execute a generic query on stored documents, returning Documents+other info.</p>
<p>The return value has a variable format, depending on whether the ‘sort vector’
is requested back from the server.</p>
<p>Only the <cite>n</cite> parameter is required. Omitting all other parameters results
in a query that matches each and every document found on the collection.</p>
<p>The method does not expose a projection directly, which is instead
automatically determined based on the invocation options.</p>
<p>The returned Document objects are codec-independent.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> – amount of items to return. Fewer items than <cite>n</cite> may be returned in the
following cases: (a) the decoding skips some raw entries from
the server; (b) the collection has not enough matches.</p></li>
<li><p><strong>ids</strong> – a list of document IDs to restrict the query to. If this is supplied,
only document with an ID among the provided one will match. If further
query filters are provided (i.e. metadata), matches must satisfy both
requirements.</p></li>
<li><p><strong>filter</strong> – a metadata filtering part. If provided, it must refer to
metadata keys by their bare name (such as <cite>{“key”: 123}</cite>).
This filter can combine nested conditions with “$or”/”$and” connectors,
for example:
- <cite>{“tag”: “a”}</cite>
- <cite>{“$or”: [{“tag”: “a”}, “label”: “b”]}</cite>
- <cite>{“$and”: [{“tag”: {“$in”: [“a”, “z”]}}, “label”: “b”]}</cite></p></li>
<li><p><strong>sort</strong> – a ‘sort’ clause for the query, such as <cite>{“$vector”: […]}</cite>,
<cite>{“$vectorize”: “…”}</cite> or <cite>{“mdkey”: 1}</cite>. Metadata sort conditions
must be expressed by their ‘bare’ name.</p></li>
<li><p><strong>include_similarity</strong> – whether to return similarity scores with each match.
Requires vector sort.</p></li>
<li><p><strong>include_sort_vector</strong> – whether to return the very query vector used for the
ANN search alongside the iterable of results. Requires vector sort.
Note that the shape of the return value depends on this parameter.</p></li>
<li><p><strong>include_embeddings</strong> – whether to retrieve the matches’ own embedding vectors.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><dl class="simple">
<dt>if <cite>include_sort_vector = False</cite>, the return value is an iterable over</dt><dd><p>the AstraDBQueryResult items returned by the query. Entries that fail
the decoding step, if any, are discarded after the query, which may
lead to fewer items being returned than the required <cite>n</cite>.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>if <cite>include_sort_vector = True</cite>, the return value is a 2-item tuple</dt><dd><p><cite>(sort_v, results_ite)</cite> tuple, where:
- <cite>sort_v</cite> is the sort vector, if requested, or None if not available.
- <cite>results_ite</cite> is an iterable over AstraDBQueryResult items as above.</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>The shape of the return value depends on the value of <cite>include_sort_vector</cite></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.run_query_raw">
<span class="sig-name descname"><span class="pre">run_query_raw</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_sort_vector</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">False</span></span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_similarity</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_embeddings</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.run_query_raw"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.run_query_raw" title="Link to this definition">#</a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">run_query_raw</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">n</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_sort_vector</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Literal</span><span class="p"><span class="pre">[</span></span><span class="k"><span class="pre">True</span></span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">ids</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">sort</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_similarity</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">include_embeddings</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span></dt>
<dd><p>Execute a generic query on stored documents, returning Astra DB documents.</p>
<p>The return value has a variable format, depending on whether the ‘sort vector’
is requested back from the server.</p>
<p>Only the <cite>n</cite> parameter is required. Omitting all other parameters results
in a query that matches each and every document found on the collection.</p>
<p>The method does not expose a projection directly, which is instead
automatically determined based on the invocation options.</p>
<p>The returned documents are exactly as they come back from Astra DB (taking
into account the projection as well). A further step, namely subsequent
invocation of the <cite>convert_astra_db_document</cite> method, is required to reconstruct
codec-independent Document objects.
The reason for keeping the retrieval and the decoding steps separate is that
a caller may want to first deduplicate/discard items, in order to convert only
the items actually needed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n</strong> – amount of items to return. Fewer items than <cite>n</cite> may be returned  if
the collection has not enough matches.</p></li>
<li><p><strong>ids</strong> – a list of document IDs to restrict the query to. If this is supplied,
only document with an ID among the provided one will match. If further
query filters are provided (i.e. metadata), matches must satisfy both
requirements.</p></li>
<li><p><strong>filter</strong> – a metadata filtering part. If provided, it must refer to
metadata keys by their bare name (such as <cite>{“key”: 123}</cite>).
This filter can combine nested conditions with “$or”/”$and” connectors,
for example:
- <cite>{“tag”: “a”}</cite>
- <cite>{“$or”: [{“tag”: “a”}, “label”: “b”]}</cite>
- <cite>{“$and”: [{“tag”: {“$in”: [“a”, “z”]}}, “label”: “b”]}</cite></p></li>
<li><p><strong>sort</strong> – a ‘sort’ clause for the query, such as <cite>{“$vector”: […]}</cite>,
<cite>{“$vectorize”: “…”}</cite> or <cite>{“mdkey”: 1}</cite>. Metadata sort conditions
must be expressed by their ‘bare’ name.</p></li>
<li><p><strong>include_similarity</strong> – whether to return similarity scores with each match.
Requires vector sort.</p></li>
<li><p><strong>include_sort_vector</strong> – whether to return the very query vector used for the
ANN search alongside the iterable of results. Requires vector sort.
Note that the shape of the return value depends on this parameter.</p></li>
<li><p><strong>include_embeddings</strong> – whether to retrieve the matches’ own embedding vectors.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><dl class="simple">
<dt>if <cite>include_sort_vector = False</cite>, the return value is an iterable over</dt><dd><p>Astra DB documents (dictionaries);</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>if <cite>include_sort_vector = True</cite>, the return value is a 2-item tuple</dt><dd><p><cite>(sort_v, astra_db_ite)</cite> tuple, where:
- <cite>sort_v</cite> is the sort vector, if requested, or None if not available.
- <cite>astra_db_ite</cite> is an iterable over Astra DB documents (dictionaries).</p>
</dd>
</dl>
</li>
</ul>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>The shape of the return value depends on the value of <cite>include_sort_vector</cite></p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.search">
<span class="sig-name descname"><span class="pre">search</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">search_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.search" title="Link to this definition">#</a></dt>
<dd><p>Return docs most similar to query using a specified search type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) – Input text</p></li>
<li><p><strong>search_type</strong> (<em>str</em>) – Type of search to perform. Can be “similarity”,
“mmr”, or “similarity_score_threshold”.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) – Arguments to pass to the search method.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of Documents most similar to the query.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If search_type is not one of “similarity”,
    “mmr”, or “similarity_score_threshold”.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>list[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document">Document</a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search">
<span class="sig-name descname"><span class="pre">similarity_search</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">lexical_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.similarity_search"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search" title="Link to this definition">#</a></dt>
<dd><p>Return docs most similar to query.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) – Query to look up documents similar to.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return. Defaults to 4.</p></li>
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Filter on the metadata to apply.</p></li>
<li><p><strong>lexical_query</strong> (<em>str</em><em> | </em><em>None</em>) – for hybrid search, a specific query for the lexical
portion of the retrieval. If omitted or empty, defaults to the same
as ‘query’. If passed on a non-hybrid search, an error is raised.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) – Additional arguments are ignored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of Documents most similar to the query.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_by_vector">
<span class="sig-name descname"><span class="pre">similarity_search_by_vector</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">embedding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.similarity_search_by_vector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_by_vector" title="Link to this definition">#</a></dt>
<dd><p>Return docs most similar to embedding vector.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>embedding</strong> (<em>list</em><em>[</em><em>float</em><em>]</em>) – Embedding to look up documents similar to.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return. Defaults to 4.</p></li>
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Filter on the metadata to apply.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) – Additional arguments are ignored.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of Documents most similar to the query vector.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_embedding">
<span class="sig-name descname"><span class="pre">similarity_search_with_embedding</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.similarity_search_with_embedding"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_embedding" title="Link to this definition">#</a></dt>
<dd><p>Return docs most similar to the query with embedding.</p>
<p>Also includes the query embedding vector.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) – Query to look up documents similar to.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return. Defaults to 4.</p></li>
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Filter on the metadata to apply.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(The query embedding vector, The list of (Document, embedding),
the most similar to the query vector.).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>tuple[list[float], list[tuple[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>, list[float]]]]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_embedding_by_vector">
<span class="sig-name descname"><span class="pre">similarity_search_with_embedding_by_vector</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">embedding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.similarity_search_with_embedding_by_vector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_embedding_by_vector" title="Link to this definition">#</a></dt>
<dd><p>Return docs most similar to embedding vector with embedding.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>embedding</strong> (<em>list</em><em>[</em><em>float</em><em>]</em>) – Embedding to look up documents similar to.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return. Defaults to 4.</p></li>
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Filter on the metadata to apply.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>(The query embedding vector, The list of (Document, embedding),
the most similar to the query vector.).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[tuple[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>, list[float]]]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_relevance_scores">
<span class="sig-name descname"><span class="pre">similarity_search_with_relevance_scores</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_relevance_scores" title="Link to this definition">#</a></dt>
<dd><p>Return docs and relevance scores in the range [0, 1].</p>
<p>0 is dissimilar, 1 is most similar.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) – Input text.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return. Defaults to 4.</p></li>
<li><p><strong>**kwargs</strong> (<em>Any</em>) – <p>kwargs to be passed to similarity search. Should include:
score_threshold: Optional, a floating point value between 0 to 1 to</p>
<blockquote>
<div><p>filter the resulting set of retrieved docs.</p>
</div></blockquote>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of Tuples of (doc, similarity_score).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[tuple[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document">Document</a>, float]]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_score">
<span class="sig-name descname"><span class="pre">similarity_search_with_score</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">lexical_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.similarity_search_with_score"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_score" title="Link to this definition">#</a></dt>
<dd><p>Return docs most similar to query with score.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) – Query to look up documents similar to.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return. Defaults to 4.</p></li>
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Filter on the metadata to apply.</p></li>
<li><p><strong>lexical_query</strong> (<em>str</em><em> | </em><em>None</em>) – for hybrid search, a specific query for the lexical
portion of the retrieval. If omitted or empty, defaults to the same
as ‘query’. If passed on a non-hybrid search, an error is raised.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of (Document, score), the most similar to the query vector.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[tuple[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>, float]]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_score_by_vector">
<span class="sig-name descname"><span class="pre">similarity_search_with_score_by_vector</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">embedding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.similarity_search_with_score_by_vector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_score_by_vector" title="Link to this definition">#</a></dt>
<dd><p>Return docs most similar to embedding vector with score.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>embedding</strong> (<em>list</em><em>[</em><em>float</em><em>]</em>) – Embedding to look up documents similar to.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return. Defaults to 4.</p></li>
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Filter on the metadata to apply.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of (Document, score), the most similar to the query vector.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[tuple[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>, float]]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_score_id">
<span class="sig-name descname"><span class="pre">similarity_search_with_score_id</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">lexical_query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.similarity_search_with_score_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_score_id" title="Link to this definition">#</a></dt>
<dd><p>Return docs most similar to the query with score and id.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>query</strong> (<em>str</em>) – Query to look up documents similar to.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return. Defaults to 4.</p></li>
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Filter on the metadata to apply.</p></li>
<li><p><strong>lexical_query</strong> (<em>str</em><em> | </em><em>None</em>) – for hybrid search, a specific query for the lexical
portion of the retrieval. If omitted or empty, defaults to the same
as ‘query’. If passed on a non-hybrid search, an error is raised.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of (Document, score, id), the most similar to the query.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[tuple[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>, float, str]]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_score_id_by_vector">
<span class="sig-name descname"><span class="pre">similarity_search_with_score_id_by_vector</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">embedding</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">k</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">4</span></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">filter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><span class="pre">Document</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.similarity_search_with_score_id_by_vector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_score_id_by_vector" title="Link to this definition">#</a></dt>
<dd><p>Return docs most similar to embedding vector with score and id.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>embedding</strong> (<em>list</em><em>[</em><em>float</em><em>]</em>) – Embedding to look up documents similar to.</p></li>
<li><p><strong>k</strong> (<em>int</em>) – Number of Documents to return. Defaults to 4.</p></li>
<li><p><strong>filter</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Filter on the metadata to apply.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The list of (Document, score, id), the most similar to the query vector.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list[tuple[<a class="reference internal" href="../../core/documents/langchain_core.documents.base.Document.html#langchain_core.documents.base.Document" title="langchain_core.documents.base.Document"><em>Document</em></a>, float, str]]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt class="sig sig-object py" id="langchain_astradb.vectorstores.AstraDBVectorStore.update_metadata">
<span class="sig-name descname"><span class="pre">update_metadata</span></span><span class="sig-paren">(</span>
<dl>
<dd><em class="sig-param"><span class="n"><span class="pre">id_to_metadata</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span></span></em>,</dd>
<dd><em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>,</dd>
<dd><em class="sig-param"><span class="n"><span class="pre">overwrite_concurrency</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>,</dd>
</dl>
<span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">→</span> <span class="sig-return-typehint"><span class="pre">int</span></span></span><a class="reference internal" href="../../_modules/langchain_astradb/vectorstores.html#AstraDBVectorStore.update_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#langchain_astradb.vectorstores.AstraDBVectorStore.update_metadata" title="Link to this definition">#</a></dt>
<dd><p>Add/overwrite the metadata of existing documents.</p>
<p>For each document to update, the new metadata dictionary is appended
to the existing metadata, overwriting individual keys that existed already.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>id_to_metadata</strong> (<em>dict</em><em>[</em><em>str</em><em>, </em><em>dict</em><em>]</em>) – map from the Document IDs to modify to the
new metadata for updating. Keys in this dictionary that
do not correspond to an existing document will be silently ignored.
The values of this map are metadata dictionaries for updating
the documents. Any pre-existing metadata will be merged with
these entries, which take precedence on a key-by-key basis.</p></li>
<li><p><strong>overwrite_concurrency</strong> (<em>int</em><em> | </em><em>None</em>) – number of threads to process the updates.
Defaults to the vector-store overall setting if not provided.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>the number of documents successfully updated (i.e. found to exist,
since even an update with <cite>{}</cite> as the new metadata counts as successful.)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<ul class="simple">
</ul>
</section>
</article>
</div>
<dialog id="pst-secondary-sidebar-modal"></dialog>
<div class="bd-sidebar-secondary bd-toc" id="pst-secondary-sidebar"><div class="sidebar-secondary-items sidebar-secondary__inner">
<div class="sidebar-secondary-item">
<div class="page-toc tocsection onthispage" id="pst-page-navigation-heading-2">
<i class="fa-solid fa-list"></i> On this page
  </div>
<nav aria-labelledby="pst-page-navigation-heading-2" class="bd-toc-nav page-toc">
<ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore"><code class="docutils literal notranslate"><span class="pre">AstraDBVectorStore</span></code></a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.__init__"><code class="docutils literal notranslate"><span class="pre">__init__()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.aadd_documents"><code class="docutils literal notranslate"><span class="pre">aadd_documents()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.aadd_texts"><code class="docutils literal notranslate"><span class="pre">aadd_texts()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.aclear"><code class="docutils literal notranslate"><span class="pre">aclear()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.add_documents"><code class="docutils literal notranslate"><span class="pre">add_documents()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.add_texts"><code class="docutils literal notranslate"><span class="pre">add_texts()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.adelete"><code class="docutils literal notranslate"><span class="pre">adelete()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.adelete_by_document_id"><code class="docutils literal notranslate"><span class="pre">adelete_by_document_id()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.adelete_by_metadata_filter"><code class="docutils literal notranslate"><span class="pre">adelete_by_metadata_filter()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.adelete_collection"><code class="docutils literal notranslate"><span class="pre">adelete_collection()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.afrom_documents"><code class="docutils literal notranslate"><span class="pre">afrom_documents()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.afrom_texts"><code class="docutils literal notranslate"><span class="pre">afrom_texts()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.aget_by_document_id"><code class="docutils literal notranslate"><span class="pre">aget_by_document_id()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.aget_by_ids"><code class="docutils literal notranslate"><span class="pre">aget_by_ids()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.amax_marginal_relevance_search"><code class="docutils literal notranslate"><span class="pre">amax_marginal_relevance_search()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.amax_marginal_relevance_search_by_vector"><code class="docutils literal notranslate"><span class="pre">amax_marginal_relevance_search_by_vector()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.ametadata_search"><code class="docutils literal notranslate"><span class="pre">ametadata_search()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.arun_query"><code class="docutils literal notranslate"><span class="pre">arun_query()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.arun_query_raw"><code class="docutils literal notranslate"><span class="pre">arun_query_raw()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.as_retriever"><code class="docutils literal notranslate"><span class="pre">as_retriever()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asearch"><code class="docutils literal notranslate"><span class="pre">asearch()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search"><code class="docutils literal notranslate"><span class="pre">asimilarity_search()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_by_vector"><code class="docutils literal notranslate"><span class="pre">asimilarity_search_by_vector()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_embedding"><code class="docutils literal notranslate"><span class="pre">asimilarity_search_with_embedding()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_embedding_by_vector"><code class="docutils literal notranslate"><span class="pre">asimilarity_search_with_embedding_by_vector()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_relevance_scores"><code class="docutils literal notranslate"><span class="pre">asimilarity_search_with_relevance_scores()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_score"><code class="docutils literal notranslate"><span class="pre">asimilarity_search_with_score()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_score_by_vector"><code class="docutils literal notranslate"><span class="pre">asimilarity_search_with_score_by_vector()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_score_id"><code class="docutils literal notranslate"><span class="pre">asimilarity_search_with_score_id()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.asimilarity_search_with_score_id_by_vector"><code class="docutils literal notranslate"><span class="pre">asimilarity_search_with_score_id_by_vector()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.aupdate_metadata"><code class="docutils literal notranslate"><span class="pre">aupdate_metadata()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.clear"><code class="docutils literal notranslate"><span class="pre">clear()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.copy"><code class="docutils literal notranslate"><span class="pre">copy()</span></code></a><ul class="visible nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.token"><code class="docutils literal notranslate"><span class="pre">AstraDBVectorStore.token</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.ext_callers"><code class="docutils literal notranslate"><span class="pre">AstraDBVectorStore.ext_callers</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.component_name"><code class="docutils literal notranslate"><span class="pre">AstraDBVectorStore.component_name</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.collection_embedding_api_key"><code class="docutils literal notranslate"><span class="pre">AstraDBVectorStore.collection_embedding_api_key</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.collection_reranking_api_key"><code class="docutils literal notranslate"><span class="pre">AstraDBVectorStore.collection_reranking_api_key</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.delete"><code class="docutils literal notranslate"><span class="pre">delete()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.delete_by_document_id"><code class="docutils literal notranslate"><span class="pre">delete_by_document_id()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.delete_by_metadata_filter"><code class="docutils literal notranslate"><span class="pre">delete_by_metadata_filter()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.delete_collection"><code class="docutils literal notranslate"><span class="pre">delete_collection()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.filter_to_query"><code class="docutils literal notranslate"><span class="pre">filter_to_query()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.from_documents"><code class="docutils literal notranslate"><span class="pre">from_documents()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.from_texts"><code class="docutils literal notranslate"><span class="pre">from_texts()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.full_decode_astra_db_found_document"><code class="docutils literal notranslate"><span class="pre">full_decode_astra_db_found_document()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.full_decode_astra_db_reranked_result"><code class="docutils literal notranslate"><span class="pre">full_decode_astra_db_reranked_result()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.get_by_document_id"><code class="docutils literal notranslate"><span class="pre">get_by_document_id()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.get_by_ids"><code class="docutils literal notranslate"><span class="pre">get_by_ids()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.max_marginal_relevance_search"><code class="docutils literal notranslate"><span class="pre">max_marginal_relevance_search()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.max_marginal_relevance_search_by_vector"><code class="docutils literal notranslate"><span class="pre">max_marginal_relevance_search_by_vector()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.metadata_search"><code class="docutils literal notranslate"><span class="pre">metadata_search()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.run_query"><code class="docutils literal notranslate"><span class="pre">run_query()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.run_query_raw"><code class="docutils literal notranslate"><span class="pre">run_query_raw()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.search"><code class="docutils literal notranslate"><span class="pre">search()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search"><code class="docutils literal notranslate"><span class="pre">similarity_search()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_by_vector"><code class="docutils literal notranslate"><span class="pre">similarity_search_by_vector()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_embedding"><code class="docutils literal notranslate"><span class="pre">similarity_search_with_embedding()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_embedding_by_vector"><code class="docutils literal notranslate"><span class="pre">similarity_search_with_embedding_by_vector()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_relevance_scores"><code class="docutils literal notranslate"><span class="pre">similarity_search_with_relevance_scores()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_score"><code class="docutils literal notranslate"><span class="pre">similarity_search_with_score()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_score_by_vector"><code class="docutils literal notranslate"><span class="pre">similarity_search_with_score_by_vector()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_score_id"><code class="docutils literal notranslate"><span class="pre">similarity_search_with_score_id()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.similarity_search_with_score_id_by_vector"><code class="docutils literal notranslate"><span class="pre">similarity_search_with_score_id_by_vector()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#langchain_astradb.vectorstores.AstraDBVectorStore.update_metadata"><code class="docutils literal notranslate"><span class="pre">update_metadata()</span></code></a></li>
</ul>
</li>
</ul>
</nav></div>
</div></div>
</div>
<footer class="bd-footer-content">
</footer>
</main>
</div>
</div>
<!-- Scripts loaded after <body> so the DOM is not blocked -->
<script defer="" src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer="" src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>
<footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
<div class="footer-items__start">
<div class="footer-item">
<p class="copyright">
    
      © Copyright 2025, LangChain Inc.
      <br/>
</p>
</div>
</div>
</div>
</footer>
</body>
</html>